<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Git Konus Uygulamasi</title>
  
<style>


 
#splash {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  background: #5458a6;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  transition: opacity 1s ease, visibility 1s ease;
  overflow: hidden;
}

#splash.hidden {
  opacity: 0;
  visibility: hidden;
}

#splash .logo-container {
  text-align: center;
  max-width: 90%;
  will-change: transform;
  animation: pop 1s ease-out forwards;
}

#splash img {
  width: 40vw;
  max-width: 160px;
  height: auto;
  display: block;
  margin: 0 auto;
}

#splash .app-name {
  margin-top: 15px;
  font-size: clamp(16px, 5vw, 22px);
  font-weight: bold;
  color: #fff;
  text-align: center;
}


/* Bounce animation on wrapper */
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
}

/* Bounce text (smaller movement) */
@keyframes bounce-text {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
  100% { transform: scale(1); opacity: 1; }
}
  
@keyframes glow {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}
  
@keyframes pop {
  0% { transform: scale(3); opacity: 0; }
  60% { transform: scale(1.7); opacity: 1; }
  100% { transform: scale(2); }
}


  
body { font-family: Georgia, serif; margin: 0; padding: 0; padding-top: 80px; background: #5458a6; color: #fff; }

#tinyTopLeft {
  color: transparent;      /* Makes text invisible */
  pointer-events: none;    /* Optional: prevents clicking on it */
}

/* Step Progress Bar */
.step-progress-line {
  position: absolute;
  bottom: 27px; /* aligns with step dots */
  left: 0;
  height: 5px;
  background: linear-gradient(90deg, #ffd83a, #ffc700);
  width: 0%;
  z-index: -1;
  transition: width 1s ease-in-out;
  border-radius: 3px;
}
.step-progress-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: #4247a6;
  padding: 0px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 2000;
  font-weight: bold;
  font-family: Georgia, serif;
}
.step-progress-container-inner {
  position: relative;
  align-items: center;
  width: 100%;
  height: 120px;
  display: flex;
  justify-content: space-between;
  left: 0px;
  margin: 0 auto; 
}

.step-progress-container-inner .bottom-text {
  position: absolute;
  bottom: 0;            /* stick to bottom */
  left: 0;              /* align to left */
  text-align: left;      /* left-align text */
  color: #fff;           /* white text */
  font-size: 1rem;     /* bigger, relative size */
  padding-left: 1rem;    /* spacing from left */
  padding-bottom: 0.3rem;/* spacing from bottom */
  font-weight: normal;    /* not bold */
}

#stepBeginner { left: 0%; }
#stepBronze   { left: 25%; }
#stepSilver   { left: 50%; }
#stepGold     { left: 85%; }

.step-progress-step {
  position: absolute;
  top: 0;
  transform: translateX(-50%); /* center alignment */
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 46px;
  color: #8c90d0;
  opacity: 0.4;       /* dim by default */
  transition: opacity 0.3s, color 0.3s;
}

.step-progress-step:not(:last-child)::after {
  content: '';
  position: absolute;
  top: 12px;
  right: -50%;
  width: 100%;
  height: 0px;
  background: #ddd;
  z-index: -1;
}

.step-progress-step.completed {
  color: #28a745;
  opacity: 1;          /* fully visible when completed */
}

.step-progress-step.completed:not(:last-child)::after {
  background: linear-gradient(to right, #cd7f32, #c0c0c0, #ffd700, #e5e4e2);
}

.step-progress-step span {
  margin-top: 6px;
  font-size: 0.8em;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-15px); }
  60% { transform: translateY(-8px); }
}

.step-progress-step.bounce {
  animation: bounce 0.6s;
}

#assessmentPopup {
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 0.8s ease, transform 0.8s ease;
background: transparent !important; /* Remove black background */
  pointer-events: none; /* Allow clicks to pass through when not visible */
}

#assessmentPopup.show {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto; /* Enable clicks when visible */
}

#assessmentPopup .popup-content {
  background: white; /* Ensure content has white background */
  box-shadow: 0 10px 30px rgba(0,0,0,0.3); /* Add shadow for depth */
  pointer-events: auto; /* Ensure content is clickable */
}
  
/* Gradient wipe overlay */
.gradient-wipe {
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0) 100%);
  pointer-events: none;
  animation: wipe 2s ease forwards;
  border-radius: 12px; /* match lesson card border-radius */
}

@keyframes wipe {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.youtube-app-btn:hover {
  background: #ff0000;
  transform: scale(1.15);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}
.share-option-btn {
  background: #f8f9fa;
  border: 2px solid #e9ecef;
  border-radius: 8px;
  padding: 12px;
  cursor: pointer;
  text-align: left;
  font-family: Georgia, serif;
  font-size: 1em;
  color: #495057;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
}

.share-option-btn:hover {
  background: #e9ecef;
  transform: translateY(-2px);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* NEW STYLES FOR BEN KIMIM POPUP */
#benKimimPopup .popup-content {
  background: white;
  padding: 10px;
  border-radius: 12px;
  max-width: 500px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  max-height: 85vh; /* Limit height for mobile */
  display: flex;
  flex-direction: column;
}

.benkimim-title {
  font-size: 1.5em;
  color: #5458a6;
  margin-bottom: 10px;
  font-weight: bold;
  font-family: Georgia, serif;
  flex-shrink: 0; /* Prevent title from shrinking */
}

.benkimim-scrollable-content {
  max-height: calc(85vh - 180px); /* Calculate available space */
  overflow-y: auto;
  margin-bottom: 15px;
  padding-right: 5px;
}

.benkimim-close-btn {
  background: #5458a6;
  color: white;
  padding: 12px 30px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-family: Georgia, serif;
  font-size: 1.1em;
  transition: background 0.3s;
  flex-shrink: 0; /* Prevent button from shrinking */
  margin-top: auto; /* Push button to bottom */
}

.benkimim-close-btn:hover {
  background: #4247a6;
  transform: scale(1.05);
}

/* Ensure proper popup positioning on mobile */
@media (max-height: 700px) {
  #benKimimPopup .popup-content {
    max-height: 90vh;
    padding: 20px;
  }
  
  .benkimim-scrollable-content {
    max-height: calc(90vh - 160px);
  }
  
  .benkimim-title {
    font-size: 1.5em;
    margin-bottom: 10px;
  }
}

@keyframes pulseCelebration {
  0% { 
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
  }
  50% { 
    transform: scale(1.05);
    box-shadow: 0 0 0 20px rgba(40, 167, 69, 0);
  }
  100% { 
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
  }
}

#evalBtn.permanent {
  box-shadow: 0 0 15px rgba(212, 156, 2, 0.7);
  border: 2px solid #fff;
  animation: subtlePulse 3s infinite ease-in-out;
}
/* Adjust container padding for top fixed bar */
.container { max-width: 700px; margin: 0px auto 60px; padding: 15px; }

.lesson { margin-bottom: 20px; padding: 15px; border-radius: 8px; color: #000; display: flex; flex-direction: column; scroll-margin-top: 36px; position: relative; }
.lesson-title { font-weight: bold; margin-bottom: 10px; display: flex; align-items: center; gap: 12px; font-size: 1.4em; }
.lesson-title img { width: 120px; height: 70px; border-radius: 6px; object-fit: cover; flex-shrink: 0; cursor: pointer; }
.checkmark { position: absolute; top: 2px; right: 2px; background: #28a745; color: #fff; border-radius: 50%; width: 32px; height: 32px; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 20px; z-index: 10; box-shadow: 0 0 6px rgba(0,0,0,0.5); transform: scale(0); animation: popIn 0.5s forwards; }
@keyframes popIn { 0% { transform: scale(0); } 60% { transform: scale(1.3); } 100% { transform: scale(1); } }

.video-wrapper { position: relative; width: 290px; height: 160px; overflow: hidden; border-radius: 12px; margin-top: 5px; margin-left: 15px;}
.video-thumb { width: 100%; height: 100%; object-fit: cover; object-position: center; border-radius: 6px; cursor: pointer; }
.play-btn {position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50px;
  height: 40px;
  background: rgba(255, 0, 0, 0.9);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(4px);
}
.play-btn::before {
  content: '';
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 8px 0 8px 16px;
  border-color: transparent transparent transparent white;
  margin-left: 3px;
}

.play-btn:hover {
  background: rgba(255, 0, 0, 0.9);
  transform: translate(-50%, -50%) scale(1.1);
}
.done-btn { background-color: #28a745; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; color: #fff; margin-top: 10px; align-self: flex-end; font-size: 1.2em; transition: transform 0.2s, background 0.3s; }
.done-btn:hover { background-color: #1f7f35; transform: scale(1.05); }

.popup, .confirm-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; justify-content: center; align-items: center; z-index: 2000; opacity: 0; transform: scale(0.8); transition: opacity 0.3s ease, transform 0.3s ease; }
.popup.show, .confirm-popup.show { opacity: 1; transform: scale(1); }
.popup { background: rgba(0,0,0,0.6); }
.popup-content { background: white; padding: 20px; border-radius: 12px; width: 90%; max-width: 400px; display: flex; flex-direction: column; color: #000; box-shadow: 0 10px 30px rgba(0,0,0,0.3); padding-top: 10;
  margin-top: 0; }
textarea { width: 100%; height: 160px; margin-bottom: 10px; resize: none; font-size: 1.1em; padding: 10px; border-radius: 8px; border: 1px solid #ccc; }
.popup-message { color: red; font-weight: bold; text-align: center; margin-bottom: 10px; display: none; }

button { transition: all 0.2s ease; border-radius: 8px; font-weight: bold; cursor: pointer; }
button:hover { transform: scale(1.05); }

.confirm-popup { background: rgba(0,0,0,0.5); }
.confirm-content { background: #fff; color: #000; padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; text-align: center; display: flex; flex-direction: column; gap: 15px; font-family: Georgia, serif;}
.confirm-buttons { display: flex; justify-content: space-around; font-family: Georgia, serif;}
.confirm-buttons button { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: transform 0.2s; font-family: Georgia, serif;}
.confirm-buttons button:hover { transform: scale(1.05); font-family: Georgia, serif;}
.confirm-buttons .yes { background: #28a745; color: #fff; font-family: Georgia, serif;}
.confirm-buttons .no { background: #dc3545; color: #fff; font-family: Georgia, serif;}

#videoPopup .popup-content { background: none; box-shadow: none; padding: 0; border: none; max-width: 800px; width: 95%; font-family: Georgia, serif;}


.popup, .confirm-popup {
  z-index: 4000; /* Base z-index for all popups */
}

.confirm-popup {
  z-index: 5000; /* Confirm popups should be on top */
}

#assessmentPopup {
  z-index: 4000; /* Assessment popup stays below confirm */
}

/* Ensure popup backgrounds don't block each other */
.popup.show, .confirm-popup.show {
  z-index: 5000; /* When shown, confirm should be on top */
}

#assessmentPopup.show {
  z-index: 4000; /* Assessment should stay below when shown */
}
.top-controls {
  position: fixed;
  top: 100px; 
  right: 20px;
  z-index: 3000;
}
.menu-item { padding: 8px 15px; cursor: pointer; border-radius: 8px; transition: background 0.3s; }
.menu-item:hover { background: #ddd; }

.word-progress { height: 12px; border-radius: 6px; background: #ddd; margin-bottom: 10px; overflow: hidden; }
.word-progress-bar { height: 100%; width: 0%; background: linear-gradient(to right, #28a745, #85e085); transition: width 0.2s; }

@keyframes tremble {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(2deg); }
  50% { transform: rotate(0deg); }
  75% { transform: rotate(-2deg); }
  100% { transform: rotate(0deg); }
}

.tremble {
  animation: tremble 0.5s ease-in-out infinite;
}

@keyframes newLessonHighlight {
  0% { background-color: #ffff99; transform: scale(1.02); }
  50% { background-color: #fdd607; transform: scale(1); } /* Use yellow instead of blue */
  100% { background-color: #fdd607; transform: scale(1); } /* End on yellow */
}

.app-title-above-lessons {
  text-align: right;
  padding: 23px 30px 5px 20px;
  margin-top: 0;
}

.app-main-title {
  color: #fff;
  font-size: 1.8em;
  font-weight: bold;
  margin: 0;
  
  font-family: Georgia, serif;
}

.new-lesson {
  animation: newLessonHighlight 1.2s ease forwards;
}
#assessmentPopup .popup-content {
  display: flex;
  flex-direction: column;
  max-height: 80vh;
  height: 80vh;
  padding: 0;
  overflow: hidden;
}

.assessment-image-container {
  flex-shrink: 0;
  width: 100%;
  max-height: 200px;
  overflow: hidden;
}

.assessment-image-container img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.assessment-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.assessment-buttons {
  flex-shrink: 0;
  padding: 15px;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: center;
}

/* skipped lesson thumbnail play button */
.skipped-lesson-play-btn {
  position: absolute;
  bottom: 8px;
  right: 8px;
  background: #ff4444;
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 12px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  z-index: 5;
}

.skipped-lesson-play-btn:hover {
  background: #ff0000;
  transform: scale(1.1);
}

.vertical-gallery {
  display: flex;
  flex-direction: column;
  gap: 15px;           /* space between images */
  margin-top: 20px;
}

.vertical-gallery img {
  width: 100%;
  max-width: 350px;    /* control size */
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  margin: 0 auto;      /* center images */
}

/* Ask Orkun Popup Enhanced Styles */
#askOrkunPopup .popup-content {
  background: white;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  max-height: 90vh;
  overflow-y: auto;
}

#askOrkunPopup label {
  font-family: Georgia, serif;
  color: #333;
}

#askOrkunPopup input[type="text"],
#askOrkunPopup input[type="number"] {
  font-family: Georgia, serif;
  font-size: 1em;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
  transition: border-color 0.3s;
}

#askOrkunPopup input[type="text"]:focus,
#askOrkunPopup input[type="number"]:focus {
  border-color: #5458a6;
  outline: none;
}

#askOrkunPopup input[type="radio"] {
  margin-right: 5px;
}

#askOrkunText {
  font-family: Georgia, serif;
  font-size: 1em;
  line-height: 1.5;
}

#askOrkunSend:hover {
  background: #1f7f35 !important;
}

#askOrkunCancel:hover {
  background: #c82333 !important;
}
.novel-style {
  font-family: "Georgia", serif;
  font-size: 1.3em;
  line-height: 1.8;
  background: #fdfcf7;
  color: #2c2c2c;
  max-width: 600px;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  text-align: left;
  white-space: pre-wrap;
}
#editNoteBtn:hover {
  text-decoration: underline;
}

.menu-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 2.2em; /* Larger three-dot icon */
  padding: 15px; /* Larger tap area */
  color: #fff;
  cursor: pointer;
  border-radius: 8px;
  background: #5458a6; /* Matches app theme */
  z-index: 1700; /* Above other elements */
}

#menuDropdown {
  position: absolute;
  top: 60px; /* Adjusted for larger menu-btn */
  right: 0;
  min-width: 220px; /* Increased from 180px */
  background: #fff;
  color: #000;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  z-index: 1600;
  display: none;
  flex-direction: column;
  padding: 10px 0; /* Increased from 5px 0 */
}

.menu-item {
  padding: 12px 15px; /* Larger padding for touchability */
  font-size: 1.2em; /* Larger text */
  color: #5458a6;
  cursor: pointer;
  font-family: Georgia, serif;
  border-bottom: 1px solid #eee;
}

.menu-item:last-child {
  border-bottom: none;
}

.menu-item:hover {
  background: #f0f0f0; /* Hover effect for clarity */
}

/* About Me Popup */
#aboutPopup .popup-content {
  max-width: 500px;
  padding: 25px;
  text-align: center;
}

.about-title {
  font-size: 1.5em;
  color: #5458a6;
  margin-bottom: 15px;
  font-weight: bold;
}

.about-text {
  font-size: 1.1em;
  line-height: 1.6;
  color: #333;
  margin-bottom: 20px;
  font-family: Georgia, serif;
}

.about-close-btn {
  background: #5458a6;
  color: white;
  padding: 10px 25px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-family: Georgia, serif;
  font-size: 1em;
  transition: background 0.3s;
}

.about-close-btn:hover {
  background: #4247a6;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const CORRECT_PASSWORD = "2025"; // üîë Change this
  const STORAGE_KEY = "page_unlocked";
  const modal = document.getElementById("passwordModal");
  const input = document.getElementById("passwordInput");
  const btn = document.getElementById("submitPassword");
  const error = document.getElementById("errorMsg");

  // Show modal if not unlocked
  if (localStorage.getItem(STORAGE_KEY) !== "true") {
    modal.style.display = "flex";
  } else {
    modal.style.display = "none";
  }

  btn.addEventListener("click", function () {
    if (input.value === CORRECT_PASSWORD) {
      localStorage.setItem(STORAGE_KEY, "true");
      modal.style.display = "none";
    } else {
      error.style.display = "block";
    }
  });
});
</script>


</head>
<body>
<div id="splash">
  <div class="logo-container">
    <img src="0002a.jpg" alt="Logo">
    <div class="app-name"></div>
  </div>
</div>

<!-- Main App -->
<div id="tinyTopLeft" style="display:block;">Videoyu izle ve ilk g√∂reve ba≈üla</div>

<div class="step-progress-container">
  <div class="step-progress-container-inner">
    <div class="bottom-text">üîî Ayaƒüa kalkman kalan g√∂rev sayƒ±sƒ±: 14</div>
    <div class="step-progress-line" id="progressLine"></div>
    <div class="step-progress-step" id="stepBeginner">
      <img src="0001.png" width="85">
    </div>
    <div class="step-progress-step" id="stepBronze">
      <img src="0002.png" width="85">
    </div>
    <div class="step-progress-step" id="stepSilver">
      <img src="0003.png" width="85">
    </div>
    <div class="step-progress-step" id="stepGold">
      <img src="0004.png" width="85">
    </div>
  </div>
</div>
  

<div class="top-row controls-row">
<div class="top-controls" id="menuBtn">
  ‚ãÆ
  <div id="menuDropdown" style="display:none; position:absolute; top:60px; right:0; background:#fff; color:#000; border-radius:6px; box-shadow:0 2px 8px rgba(0,0,0,0.3); min-width:220px; z-index:1600; flex-direction:column; padding:10px 0;">
    <div class="menu-item" id="resetLessons">G√∂revleri Sƒ±fƒ±rla</div>
    <div class="menu-item" id="copyNotesBtn">Notlarƒ± Kopyala!</div>
    <div class="menu-item" id="benKimimBtn">Ben Kimim?</div>

  </div>
</div>
</div>

<div class="app-title-above-lessons">
  <img src="LOGO.png" alt="logo" style="width: 200px;">
</div>
<div class="container" id="app"></div>

<!-- Two-option popup -->
<div class="popup" id="popup">
  <div class="popup-content">
    <button id="completeLesson" style="background:#28a745; color:#fff; padding:15px; border:none; font-size:1.2em; margin-bottom:10px; font-family: Georgia, serif;">
      G√∂revi Ba≈üardƒ±m!
    </button>
    <button id="skipLessonBtn" style="background:#aaa; color:#000; padding:15px; border:none; font-size:1.2em; font-family: Georgia, serif;">
      G√∂revi Atlayacaƒüƒ±m!
    </button>
  </div>
</div>

<!-- Note-taking popup -->
<div class="popup" id="notePopup">
  <div class="popup-content novel-style" style="display:flex; flex-direction:column; max-height:50vh;">
    <!-- Header -->
    <div id="notePopupHeader" 
         style="font-family: Georgia, serif; font-weight:bold; font-size:18px; text-align:top; margin-bottom:10px;">
      Not Alma
    </div>
    <div class="word-progress"><div class="word-progress-bar" id="wordProgress"></div></div>  
    <div id="noteMessage" contenteditable="true" spellcheck="true" 
         style="flex:1; overflow-y:auto; padding-right:5px; font-family: Georgia, serif; font-size:12px; color:green;"></div>
    <textarea id="noteInput" placeholder="Bu g√∂rev hakkƒ±nda en az 10 kelime yaz..." style="width: 100%; min-height: 100px; padding: 10px; font-family: Georgia, serif;"></textarea>
    <div style="display:flex; justify-content:space-between; font-family: Georgia, serif; margin-bottom:0; padding-bottom:0;">
      <button id="saveNote" style="background:#28a745; color:#fff; padding:10px; border:none; font-family: Georgia, serif;">Notu Kaydet</button>
      <button id="cancelNote" style="background:#aaa; color:#000; padding:10px; border:none; font-family: Georgia, serif;">ƒ∞ptal</button>
    </div>
  </div>
</div>

<div class="confirm-popup" id="confirmPopup">
  <div class="confirm-content" style="font-family: Georgia, serif; font-size:1.2500em;">
    <div id="confirmText">Uyarƒ±!</div>
    <div class="confirm-buttons">
      <button class="yes" id="confirmYes">Evet</button>
      <button class="no" id="confirmNo">Hayƒ±r</button>
    </div>
  </div>
</div>

<div class="popup" id="videoPopup">
  <div class="popup-content">
    <iframe id="videoFrame" width="100%" height="450" frameborder="0" allowfullscreen></iframe>
    <div style="display: flex; justify-content: flex-end; padding: 10px;">
    <button id="openInYoutubeBtn"
            style="background:#FF0000; color:#fff; padding:10px 20px; border:none;
                   border-radius:8px; cursor:pointer; font-family:Georgia,serif;
                   font-size:16px; margin-right: 20px;">
        ‚ñ∂ YouTube'da A√ß
    </button>
</div>
  </div>
</div>

<div class="popup" id="noteReadPopup">
  <div class="popup-content novel-style" style="display:flex; flex-direction:column; max-height:50vh;">
    <div id="noteReadContent" contenteditable="true" spellcheck="true" 
         style="flex:1; overflow-y:auto; padding-right:5px;">
      <!-- Note content will go here and is editable immediately -->
    </div>
    <div id="noteFooter" style="font-size:0.7em; color:#555; text-align:center; margin-top:5px;">
      Son Deƒüi≈ütirilme: --
    </div>
  </div>
</div>

<div class="popup" id="encouragePopup">
  <div class="popup-content" style="text-align:center;">
    <h2 style="font-size:50px; margin:4px;">üëç</h2>
    <p id="encourageMessage" style="margin:7px 0 0 0; font-size:20px;">Devam et, sen √ßok iyisin!</p>
    <button onclick="hidePopup('encouragePopup')" 
            style="background:#28a745; color:#fff; padding:15px; border:none; margin-top:10px; font-family:Georgia, serif;">
      Tamam
    </button>
  </div>
</div>



<div class="confirm-popup" id="allDonePopup">
  <div class="confirm-content" style="font-family: Georgia, serif; font-size:1.2500em;">
    <div id="allDoneText">Uyarƒ±!</div>
    <div class="confirm-buttons">
      <button class="yes" id="allDoneOk">Tamam</button>
    </div>
  </div>
</div>

<div class="confirm-popup" id="warnPopup">
  <div class="confirm-content" style="font-family: Georgia, serif; font-size:1.2500em;">
    <div id="warnText">Uyarƒ±!</div>
    <div class="confirm-buttons">
      <button class="yes" id="warnYes">Evet</button>
      <button class="no" id="warnNo">Hayƒ±r</button>
    </div>
  </div>
</div>

<div class="popup" id="assessmentPopup">
  <div class="popup-content" style="display:flex; flex-direction:column; max-width:550px; width: 90%; height: 80vh; padding: 0; overflow: hidden;">
    <div id="assessmentDynamicContent" style="display: flex; flex-direction: column; height: 100%;"></div>
    <button id="assessmentClose" style="background:#28a745; color:#fff; padding:12px; border:none; font-family: Georgia, serif; margin:0 15px 15px 15px; border-radius:8px;">Kapat</button>
  </div>
</div>

<!-- Orkun'a Sor Popup -->
<div class="popup" id="askOrkunPopup">
  <div class="popup-content" style="max-width: 500px;">
    <h3 style="text-align: center; margin-bottom: 20px; color: #5458a6;">Orkun'a G√∂nder</h3>
    
 <!-- User Information Section -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
  <div>
    <label for="userName" style="display: block; margin-bottom: 5px; font-weight: bold;">Ad</label>
    <input type="text" id="userName" placeholder="Adƒ±n" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
  </div>
  <div>
    <label for="userSurname" style="display: block; margin-bottom: 5px; font-weight: bold;">Soyad</label>
    <input type="text" id="userSurname" placeholder="Soyadƒ±n" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
  </div>
</div>

<!-- ADD THIS NEW ROW FOR AGE, GENDER AND CITY -->
<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;">
  <div>
    <label for="userAge" style="display: block; margin-bottom: 5px; font-weight: bold;">Ya≈ü</label>
    <input type="number" id="userAge" placeholder="Ya≈üƒ±n" min="1" max="120" style="width: 50%; padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
  </div>
  <div>
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Cinsiyet</label>
    <div style="display: flex; gap: 15px;">
      <label style="display: flex; align-items: center;">
        <input type="radio" name="userGender" value="üë©" style="margin-right: 5px;"> Kadƒ±n
      </label>
      <label style="display: flex; align-items: center;">
        <input type="radio" name="userGender" value="üë®" style="margin-right: 5px;"> Erkek
      </label>
    </div>
  </div>
  <!-- ADD THIS NEW CITY FIELD -->
  <div>
    <label for="userCity" style="display: block; margin-bottom: 5px; font-weight: bold;">≈ûehir</label>
    <input type="text" id="userCity" placeholder="≈ûehrin" style="width: 60%; padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
  </div>
</div>
    
    <!-- Question Section -->
    <div style="margin-bottom: 15px;">
      <label for="askOrkunText" style="display: block; margin-bottom: 8px; font-weight: bold;">Orkun'a sorulacak sorularƒ± buraya yaz:</label>
      <textarea id="askOrkunText" placeholder="Sorularƒ±nƒ± buraya yaz..." style="width: 100%; height: 150px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; resize: vertical; font-family: Georgia, serif;"></textarea>
    </div>
    
    <!-- Share Notes Checkbox -->
    <div style="margin-bottom: 20px; display: flex; align-items: center;">
      <input type="checkbox" id="shareNotesCheckbox" style="margin-right: 10px;">
      <label for="shareNotesCheckbox" style="font-family: Georgia, serif;">Orkun'la Ders Notlarƒ±nƒ± Payla≈ü</label>
    </div>
    
    <!-- Action Buttons -->
    <div style="display: flex; justify-content: space-between;">
      <button id="askOrkunCancel" style="background: #dc3545; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-family: Georgia, serif;">ƒ∞ptal</button>
      <button id="askOrkunSend" style="background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-family: Georgia, serif;">G√∂nder</button>
    </div>
  </div>
</div>

<!-- NEW: Ben Kimim Popup -->
<div class="popup" id="benKimimPopup">
  <div class="popup-content">
    <h2 class="benkimim-title">Orkun Kumkale Kimdir?</h2>
    <br><center><img src="benkimim.jpg" alt="orkun" style="width: 130px;"></center></br>
    
    <!-- Scrollable content container -->
    <div class="benkimim-scrollable-content">
      <p class="benkimim-text">
        Orkun, insanlarƒ±n i√ßsel potansiyellerini ke≈üfetmelerine ve sosyal becerilerini 
        geli≈ütirmelerine yardƒ±mcƒ± olan etkile≈üimli programlar ve videolar √ºretmekte, katƒ±lƒ±mcƒ±larƒ±n g√ºnl√ºk ya≈üamlarƒ±nda pratik uygulamalar yaparak √∂z g√ºvenlerini adƒ±m adƒ±m in≈üa etmelerini saƒülamaktƒ±r.        
        2024 yƒ±lƒ±nda a√ßmƒ±≈ü olduƒüu Youtube kanalƒ±nda videolar payla≈ümaktadƒ±r. Danƒ±≈ümanlƒ±k ve ƒ∞leti≈üim i√ßin: <strong>orkunkumkale@yahoo.com</strong>
        
        <!-- IMAGE GALLERY -->
<div class="vertical-gallery">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(1).jpg" alt="Ovgu 1">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(2).jpg" alt="Ovgu 2">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(3).jpg" alt="Ovgu 3">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(4).jpg" alt="Ovgu 4">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(5).jpg" alt="Ovgu 5">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(6).jpg" alt="Ovgu 6">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(7).jpg" alt="Ovgu 7">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(8).jpg" alt="Ovgu 8">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(9).jpg" alt="Ovgu 9">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(10).jpg" alt="Ovgu 10">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(11).jpg" alt="Ovgu 11">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(12).jpg" alt="Ovgu 12">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(13).jpg" alt="Ovgu 13">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(14).jpg" alt="Ovgu 14">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(15).jpg" alt="Ovgu 15">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(16).jpg" alt="Ovgu 16">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(17).jpg" alt="Ovgu 17">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(18).jpg" alt="Ovgu 18">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(19).jpg" alt="Ovgu 19">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(20).jpg" alt="Ovgu 20">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(21).jpg" alt="Ovgu 21">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(22).jpg" alt="Ovgu 22">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(23).jpg" alt="Ovgu 23">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(24).jpg" alt="Ovgu 24">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(25).jpg" alt="Ovgu 25">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(26).jpg" alt="Ovgu 26">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(27).jpg" alt="Ovgu 27">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(28).jpg" alt="Ovgu 28">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(29).jpg" alt="Ovgu 29">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(30).jpg" alt="Ovgu 30">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(31).jpg" alt="Ovgu 31">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(32).jpg" alt="Ovgu 32">
  <img src="https://github.com/orkunkumkale/gitkonus/blob/main/ovgu_(33).jpg" alt="Ovgu 33">
</div>
      </p>
    </div>
    
    <button class="benkimim-close-btn" onclick="hidePopup('benKimimPopup')">Kapat</button>
  </div>
</div>


<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }


/* --- SPLASH SCRIPT --- */
window.addEventListener("load", function () {
  setTimeout(() => {
    document.getElementById("splash").classList.add("hidden");
  }, 3000); // splash visible for 2 seconds
});

const lessonCompleteMessages = {
  0: "Bravo! Hayalini payla≈ümak kolay deƒüildir. Dalga ge√ßileceƒüini sanarsƒ±n. Ama hi√ß de √∂yle olmadƒ± deƒüil mi? Hatta cesaretin bir adƒ±m √∂ne √ßƒ±ktƒ±. Artƒ±k hayallerin sadece zihninde deƒüil, kendi realitende de var. Devam et, bu g√ºven seninle b√ºy√ºyecek.",
  1: "Tebrikler! Korkularƒ±nƒ± payla≈ümak onlarƒ± k√º√ß√ºltt√º. Daha b√ºy√ºk korkularƒ±n varsa, onlarƒ± da zamanla payla≈üacaksƒ±n. Tabii zamanƒ± gelince. Kanayan yaralarƒ±n sadece bir yara izi olduƒüu zaman artƒ±k korkmayacaksƒ±n. √á√ºnk√º biliyorsun ki HERKESƒ∞N acƒ±larƒ± var. Ama ≈üu saatten sonra, umarƒ±m artƒ±k korkularƒ±n eskisi kadar senin √∂n√ºn√º kesemeyecek.",
  2: "Harika! Her y√ºr√ºy√º≈ü, i√ßindeki g√ºc√º biraz daha a√ßƒ±ƒüa √ßƒ±karƒ±yor. Sanki hayatƒ±n sƒ±kƒ±cƒ±lƒ±ƒüƒ±nƒ±n i√ßinde hƒ±zlƒ± adƒ±mlarla ge√ßip gittin ve bu sana bir cesaret a≈üƒ±ladƒ±. Kimsenin d√ºnyasƒ±na girmek zorunda deƒüilsin. Kendi hayatƒ±nƒ±n merkezinde, kalabalƒ±ƒüƒ±n ve karanlƒ±ƒüƒ±n i√ßinden hi√ß etkilenmeden hƒ±zlƒ±ca ge√ßerek, kendi ya≈üantƒ±nda ba≈ü rol oynayacaksƒ±n. Emin adƒ±mlarla, saƒüa sola sapmadan, hedef belirleyerek, hayatƒ± yara yara y√ºr√ºmeye devam et dostum!",
  3: "M√ºkemmel! Yeni alanlara adƒ±m attƒ±n. √ñƒürenmek, √∂z g√ºvenin yakƒ±tƒ±dƒ±r ve √∂ƒüreneceƒüin ≈üeyler o kadar √ßok ki. Bu √∂ƒüretiler de √ßok uzaklarda deƒüil, yakƒ±nƒ±mƒ±zda. ≈û√ºkret, ve yola devam et. √ñƒürenmeye, geli≈ümeye devam...",
  4: "Tebrikler! Kendi hayatƒ±nƒ±n kahramanƒ± olduƒüunu fark ettin umarƒ±m. Yazdƒ±ƒüƒ±n her kelime, seni g√º√ßlendirdi ve geleceƒüe g√ºvenle bakmanƒ± saƒüladƒ±. Artƒ±k VARSIN, √ß√ºnk√º bir hikayen var. Sorduklarƒ±nda SEN Kƒ∞MSƒ∞N diye, anlatacak bir ≈üeylerin var. Dediƒüim gibi. Sen VARSIN ve bu √ßok g√ºzel!",
  5: "Harika! ƒ∞nsanlarla ileti≈üime ge√ßmek i√ßin adƒ±m attƒ±n. Sosyal cesaretini g√º√ßlendirdin ve artƒ±k biraz daha rahat ileti≈üim kurabiliyorsun. Bunlardan √ßok daha fazlasƒ±nƒ± yapabileceƒüine eminim. G√∂rd√ºƒü√ºn her insanla konu≈üabilirsin. ƒ∞nsanlardan korkmak, k√∂t√º insanlara cesaret verir. Onlardan korkma, yakla≈üan sen ol, ki ƒ∞Yƒ∞LER seni √ßeksin, √ß√ºnk√º sen ƒ∞Yƒ∞Sƒ∞N...",
  6: "M√ºkemmel! Yardƒ±m etmek, i√ßsel g√ºc√ºn√º artƒ±rƒ±r. ƒ∞htiyarlarƒ±n bize ihtiyacƒ± var. VERMEK m√ºhimdir, almaktan daha m√ºhim. Unutma ki hayatƒ±nƒ±n ilerleyen yƒ±llarƒ±nda vererek ge√ßireceksin. Meyvelerini vermeye ≈üimdiden ba≈üladƒ±ƒüƒ±n i√ßin tebrik ederim",
  7: "Tebrikler! Disiplin ve irade g√ºc√ºn√º g√∂sterdin. D√ºzenli adƒ±mlar, i√ßindeki √∂z g√ºveni besler. Yapabileceƒüini g√∂rd√ºn. Fark yaratabileceƒüini g√∂rd√ºn. ƒ∞stediƒüin zaman ya≈üantƒ±na kendi isteƒüinle Y√ñN verebileceƒüini g√∂rd√ºn. Dizginleri eline al. Ne olursa olsun!",
  8: "Harika! Cesaretle soru sordun ve √∂ƒürenmeye a√ßƒ±k olduƒüunu g√∂sterdin. ƒ∞nsanlarla etkile≈üim, √∂z g√ºveni artƒ±ran en g√º√ßl√º ara√ßlardan biridir. G√∂r√ºyorsun ki herkesin bir hikayesi var, herkes kendi ya≈üantƒ±sƒ±nda ba≈ü rol oynamak istiyor. Ya sen? Ne zaman dizginleri eline alacaksƒ±n?",
  9: "Tebrikler! Biraz komik drama iyi gelmi≈ütir umarƒ±m. Kendine olan kontrol√ºn√º ve korkusuzluƒüunu g√∂sterdin. Artƒ±k utan√ß ve k√º√ß√ºk endi≈üeler seni durduramaz. √ñzg√ºn ol, √∂zg√ºr ol!",
  10: "M√ºkemmel! Aile baƒülarƒ±nƒ± g√º√ßlendirdin ve duygularƒ±nƒ± a√ßƒ±k√ßa ifade ettin. Bu, hem √∂z g√ºveni hem de kalbini iyile≈ütirir.",
  11: "Tebrikler! Ailen √ßok m√ºhimdir. Onlara kar≈üƒ± herhangi bir yara izi ta≈üƒ±mamalƒ±sƒ±n. √ñz√ºr dile, af dile veya affet. Hepsi bu kadar! Ge√ßmi≈üin y√ºklerini serbest bƒ±raktƒ±n. Artƒ±k daha hafif ve √∂zg√ºr bir ≈üekilde ilerleyebilirsin.",
  12: "Harika! Cesurca ileti≈üim kurdun ve belki de hayallerin i√ßin adƒ±m attƒ±n. B√ºy√ºk hedeflere ula≈ümak, k√º√ß√ºk adƒ±mlarla ba≈ülar. B√ºy√ºk insanlarla ileti≈üim kurmak seni bulunduƒüun konfor alanƒ±ndan √ßƒ±karƒ±r. Konu≈ümak zor deƒüil, yeter ki kabuktan √ßƒ±k. Bunu ba≈üardƒ±ƒüƒ±n i√ßin kutlarƒ±m.",
  13: "Tebrikler! Kom≈üuluk unutulmaya y√ºz tutmu≈ütu, alevlendirdin. Sosyal √ßevreni geni≈ülettin ve ait olma hissini g√º√ßlendirdin. ƒ∞nsanlarla baƒü kurmak, √∂z g√ºvenin temel ta≈ülarƒ±ndan biridir.",
  14: "M√ºkemmel! Garsonlar etrafƒ±mƒ±zda var olan en g√∂r√ºnmeyen hizmetkarlardƒ±r. Sen kimin hizmetkarƒ±sƒ±n? Evet, bunu d√º≈ü√ºnmelisin. Onlar nasƒ±l seninle payla≈üƒ±yorsa sen de bir g√ºn √ßƒ±kardƒ±ƒüƒ±n √ºr√ºn veya hizmet ile insanlarla PAYLA≈ûACAKSIN. Payla≈ümanƒ±n g√ºc√ºn√º ke≈üfettin. Ayrƒ±ca minnettar olursan, bir g√ºn senden de minnettar olanlar √ßƒ±kacaktƒ±r.",
  15: "Harika! On ki≈üiye merhaba dediysen ne mutlu sana. Sosyal cesaretini olduk√ßa geli≈ütirdin demektir. Kimsenin birbirinden farkƒ± yok. Herkes birinin ona g√ºl√ºmsemesini ve SEN DE VARSIN demesini bekliyor bu d√ºnyada. Sen buna adƒ±m attƒ±n, insanlarƒ±n ruhlarƒ±na ƒ±≈üƒ±k tuttun. K√º√ß√ºk bir merhaba b√ºy√ºk bir fark yarattƒ± ve seni daha g√∂r√ºn√ºr ve deƒüerli kƒ±ldƒ±.",
  16: "Tebrikler! Eƒülence ve cesareti birle≈ütirdin. Hayat o kadar da ciddiye almaya deƒümezmi≈ü deƒüil mi? Dayak yemedin, √∂lmedin. Zihnin korkulara raƒümen ya≈üamaya devam ediyor. Kendinle dalga ge√ßebilmek, √∂z g√ºveni g√º√ßlendirir.",
  17: "M√ºkemmel! Kendinle UZUN S√úRE ba≈ü ba≈üa kaldƒ±n ve ekranlarƒ±n k√∂lesi olmadƒ±n, kutlarƒ±m. Dijital sessizlik, zihinsel g√º√ß kazandƒ±rƒ±r. Darƒ±sƒ± diƒüer insanlarƒ±n ba≈üƒ±na!",
  18: "Harika! Cesaretle farklƒ± davrandƒ±n ve eƒülenmeyi √∂ƒürendin. Kendini ifade etmekten korkmadƒ±ƒüƒ±n s√ºrece sƒ±nƒ±rlarƒ±n yok. Kimse seni d√∂vmedi, kƒ±zmadƒ±, aldƒ±rƒ±≈ü etmedi. √ñƒürendin mi artƒ±k herkesin ne kadar kendi d√ºnyasƒ±nda ya≈üadƒ±ƒüƒ±nƒ±. Korkacak bir≈üey yok. Y√ºr√ºmeye devam!",
  19: "Tebrikler! Farklƒ± olmayƒ± kucakladƒ±n ve √∂z g√ºven ve cesaretle dola≈ütƒ±n. Kendine g√ºvenmek, ba≈ükalarƒ±nƒ±n bakƒ±≈ülarƒ±na baƒülƒ± deƒüildir. Kursun son g√∂revin bu ≈üekilde tamamladƒ±n. Tebrik ederim."
};

const videos = ["FCqoCWUCNuM","8u8-ZYVdY84","ELkoDRcZQmI","nIxB220RE8w","Li_62QYzl8E","iiHHAh3vMkU","iiJrB90w5CE","gpW-M-6NBRE","tNeR2p4930k","aIl0SttbfU0","deQ_SEiGU1w","8a0b_OO4I_w","A3F4Y_gTFx0","dy5KVYKeo9s","aC-j9y5oQhE","jVsXiR_BpkU","FYOe_rNKkLs","HSA1n4ebWp4","51tQrMvvb-0","82pd4RNa-rY"];
const titles = ["Hayallerimiz","Korkularƒ±mƒ±z","Hƒ±zlƒ±ca Y√ºr√º","Kursa Yazƒ±l","Hikayeni Yaz","Bir Yabancƒ±","Ya≈ülƒ±larla","Sabahƒ±n K√∂r√º","Maƒüazaya Gir","Kahkaha At","Anne Baba","K√ºsk√ºn","Yayƒ±nevi","Kom≈üu","Garson","Merhaba","Para≈ü√ºt","Telefonsuz","Noel Baba","Pabu√ßlar"];

const lessonMessages = [
  "Hen√ºz tamamlanmƒ±≈ü g√∂revin yok!",
  "Yola √ßƒ±ktƒ±n, Tebrikler!",
  "Haydi devam. Yolun hala ba≈üƒ±!",
  "Az G√º√ß Az Tecr√ºbe. 3 g√∂rev bitti!",
  "Hmm. Hi√ß fena deƒüilsin. 4/20",
  "Emekleme d√∂nemi bitti",
  "ƒ∞yi gidiyorsun! Tamamlanan G√∂rev: 6",
  "Doƒürulma yolunda 7 g√∂rev a≈ütƒ±n!",
  "Vay be! 8 g√∂rev hallettin",
  "Doƒürulamaya pek az var! 9/20",
  "Bravo! Yolun yarƒ±sƒ±...",
  "Iyi gidi≈üat! 11 g√∂rev bitirdin",
  "Yarƒ±yƒ± ge√ßtin. Eksikleri tamamla!",
  "S√ºper g√ºce yakla≈ütƒ±n. 20'de 13!",
  "Harika! 14 g√∂rev bitirdin!",
  "√áok az kaldƒ±! Tamamlanan G√∂rev: 15",
  "16 g√∂rev zevkle bitti. Helal olsun!",
  "Ful potansiyel! 20'de 17!",
  "Tebrikler! 18 g√∂rev tamamladƒ±n!",
  "Seni kimse tutamadƒ±, 20'de 19!"
];

const app = document.getElementById('app');
let savedData = JSON.parse(localStorage.getItem("lessonData")) || {};
let currentLessonDiv = null;
let confirmAction = null;

function saveData() { localStorage.setItem("lessonData", JSON.stringify(savedData)); }

function createLessonCard(index) {
  const lesson = document.createElement('div');
  lesson.className = 'lesson';
  lesson.dataset.index = index;
  app.appendChild(lesson);
  return lesson;
}

function buildLesson(index) {
  let lesson = document.querySelector(`.lesson[data-index='${index}']`) || createLessonCard(index);
  lesson.innerHTML = '';
  const prevCompleted = index === 0 || savedData[index - 1]?.completed || savedData[index - 1]?.skipped;
  const data = savedData[index];
  const isNewlyUnlocked = prevCompleted && !data?.completed && !data?.skipped;
  if (data?.completed) return buildCompletedLesson(lesson, index);
  if (data?.skipped && lesson.dataset.repeating !== "true") return buildSkippedLesson(lesson, index);
  if (!prevCompleted) return buildLockedLesson(lesson, index);
  buildUnfinishedLesson(lesson, index);
  // Only apply new-lesson animation if not the first lesson or if savedData has entries
  if (isNewlyUnlocked && (index !== 0 || Object.keys(savedData).length > 0)) {
    lesson.classList.add('new-lesson');
    setTimeout(() => lesson.classList.remove('new-lesson'), 1200); // Match animation duration
  }
}
function buildLessonTitle(imgSrc, text, onclick) {
  const titleDiv = document.createElement('div');
  titleDiv.className = 'lesson-title';
  const img = document.createElement('img');
  img.src = imgSrc;
  img.onclick = onclick;
  titleDiv.appendChild(img);
  titleDiv.appendChild(document.createTextNode(text));
  return titleDiv;
}

const circledNumbers = [
  "‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶ ","‚ëß","‚ë®","‚ë©",
  "‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ë∞","‚ë±","‚ë≤","‚ë≥"
];

function buildLockedLesson(lesson, index) {
  lesson.style.background = '#e0e0e0';
  lesson.style.color = '#999';
  lesson.style.opacity = '0.5';
  const titleDiv = document.createElement('div');
  titleDiv.className = 'lesson-title';
  const img = document.createElement('img');
  img.src = `https://img.youtube.com/vi/${videos[index]}/hqdefault.jpg`;
  img.style.cursor = 'default';
  titleDiv.appendChild(img);
  titleDiv.appendChild(document.createTextNode(`${circledNumbers[index]} ${titles[index]}`));
  lesson.appendChild(titleDiv);
}

function buildUnfinishedLesson(lesson, index) {
  lesson.style.background = '#fdd607';
  lesson.style.color = '#000';
  lesson.style.opacity = '1';
  lesson.style.position = 'relative';

  const videoWrapper = document.createElement('div');
  videoWrapper.className = 'video-wrapper';

  const overlayThumb = document.createElement('img');
  overlayThumb.src = `https://img.youtube.com/vi/${videos[index]}/hqdefault.jpg`;
  overlayThumb.className = 'video-thumb';
  overlayThumb.onclick = () => openVideoPopup(videos[index]);

  const playBtn = document.createElement('div');
  playBtn.className = 'play-btn';
  playBtn.textContent = "";
  playBtn.onclick = () => openVideoPopup(videos[index]);



  // ADD YOUTUBE APP BUTTON
  const youtubeAppBtn = document.createElement('div');
  youtubeAppBtn.className = 'youtube-app-btn';
  youtubeAppBtn.innerHTML = 'üì±';
  youtubeAppBtn.title = "YouTube Uygulamasƒ±nda A√ß";
  youtubeAppBtn.onclick = (e) => {
    e.stopPropagation();
    openInYouTubeApp(videos[index]);
  };

  videoWrapper.appendChild(overlayThumb);
  videoWrapper.appendChild(playBtn);
  lesson.appendChild(videoWrapper);

  const titleContainer = document.createElement('div');
  titleContainer.className = 'lesson-title-container';

const lessonIcon = document.createElement('img');
  lessonIcon.src = 'yenigorev.png'; // Replace with your image path
  lessonIcon.style.width = '80px'; // Adjust size to match emoji (was 2em)
  lessonIcon.style.height = '69px';
  lessonIcon.style.marginRight = '8px';
  lessonIcon.style.verticalAlign = 'middle'; // Align with text
  lessonIcon.className = 'tremble'; // Add tremble animation
  titleContainer.appendChild(lessonIcon);

  const lessonTitle = document.createElement('span');
  lessonTitle.innerHTML = `<span style="font-size: 0.6em; color: #000000; opacity: 0.6; margin-right: 8px;">${circledNumbers[index]}</span><span style="font-size: 1em; opacity: 0.9; margin-right: 8px;">${titles[index]}</span>`;
  lessonTitle.style.cursor = "pointer";
  lessonTitle.style.fontSize = "1.9em";
  lessonTitle.style.fontWeight = "bold";
  lessonTitle.onclick = () => openVideoPopup(videos[index]);
  titleContainer.appendChild(lessonTitle);

  lesson.appendChild(titleContainer);

  const doneBtn = document.createElement('button');
  doneBtn.className = 'done-btn';
  doneBtn.textContent = "G√∂revi Tamamla";
  doneBtn.style.fontFamily = "Georgia, serif";
  doneBtn.onclick = () => { currentLessonDiv = lesson; showPopup('popup'); };
  lesson.appendChild(doneBtn);
}

function buildCompletedLesson(lesson, index) {
  lesson.style.background = '#6ca178'; // Example: green for completed
  lesson.style.color = '#000000'; // White text for contrast
  lesson.style.opacity = '0.5'; // Slightly less faded
  lesson.style.position = 'relative';

  const titleDiv = buildLessonTitle(
    `https://img.youtube.com/vi/${videos[index]}/hqdefault.jpg`,
    `${circledNumbers[index]} ${titles[index]}`,
    () => openVideoPopup(videos[index])
  );

  titleDiv.firstChild.style.position = 'relative';

  const tamamlandi = document.createElement('button');
  tamamlandi.textContent = "Bƒ∞TTƒ∞ ‚úÖ";
  tamamlandi.style.position = 'absolute';
  tamamlandi.style.top = '6px';
  tamamlandi.style.right = '6px';
  tamamlandi.style.background = '#4caf50';
  tamamlandi.style.color = '#fff';
  tamamlandi.style.padding = '2px 6px';
  tamamlandi.style.borderRadius = '4px';
  tamamlandi.style.fontSize = '0.7em';
  tamamlandi.style.fontWeight = 'bold';
  tamamlandi.style.fontFamily = 'Georgia, serif';
  tamamlandi.style.boxShadow = '0 1px 3px rgba(0,0,0,0.3)';
  tamamlandi.style.cursor = 'pointer';
  tamamlandi.onclick = () => openNoteReadPopup(lesson);
  titleDiv.firstChild.parentElement.appendChild(tamamlandi);

  lesson.appendChild(titleDiv);

  lesson.style.cursor = 'pointer';
  lesson.onclick = (e) => {
    if (e.target.tagName.toLowerCase() === 'img') return;
    openNoteReadPopup(lesson);
  };
}

function buildSkippedLesson(lesson, index) {
  lesson.style.background = '#6c6fab';
  lesson.style.color = '#000';
  lesson.style.opacity = '0.6';

  const titleDiv = buildLessonTitle(
    `https://img.youtube.com/vi/${videos[index]}/hqdefault.jpg`,
    `${circledNumbers[index]} ${titles[index]}`,
    () => openVideoPopup(videos[index])
  );

  titleDiv.firstChild.style.position = 'relative';
  
  const assessmentViewed = savedData.assessmentViewed || false;

  if (!assessmentViewed) {
    const repeat = document.createElement('span');
    repeat.textContent = "ATLANDI üîÑ";
    repeat.style.position = 'absolute';
    repeat.style.top = '6px';
    repeat.style.right = '6px';
    repeat.style.background = '#5458a6';
    repeat.style.color = '#fff';
    repeat.style.padding = '2px 6px';
    repeat.style.borderRadius = '4px';
    repeat.style.fontSize = '0.7em';
    repeat.style.cursor = 'pointer';
    repeat.style.fontWeight = 'bold';
    repeat.style.boxShadow = '0 1px 3px rgba(0,0,0,0.3)';
    repeat.onclick = () => {
      currentLessonDiv = lesson;
      confirmAction = () => {
        hidePopup('confirmPopup');
        openNotePopup(lesson);
      };
      document.getElementById('confirmText').textContent = "Dersi Tamamladƒ±n mƒ±? √ñyleyse yeni notunu yaz, nasƒ±l ba≈üardƒ±ƒüƒ±nƒ± anlat";
      document.getElementById('confirmYes').textContent = "Tamam";
      document.getElementById('confirmNo').textContent = "ƒ∞ptal";
      showPopup('confirmPopup');
    };
    titleDiv.firstChild.parentElement.appendChild(repeat);

    lesson.style.cursor = 'pointer';
    lesson.onclick = (e) => {
      if (e.target.tagName.toLowerCase() === 'img') return;
      currentLessonDiv = lesson;
      confirmAction = () => {
        hidePopup('confirmPopup');
        openNotePopup(lesson);
      };
      document.getElementById('confirmText').textContent = "Dersi Tamamladƒ±n mƒ±? √ñyleyse yeni notunu yaz, nasƒ±l ba≈üardƒ±ƒüƒ±nƒ± anlat";
      document.getElementById('confirmYes').textContent = "Tamam";
      document.getElementById('confirmNo').textContent = "ƒ∞ptal";
      showPopup('confirmPopup');
    };
  } else {
    lesson.style.cursor = 'default';
    lesson.onclick = null; // Explicitly remove onclick to prevent any row interaction
  }

  lesson.appendChild(titleDiv);
}

window.addEventListener("load", () => {
  const unfinished = document.querySelector(".lesson:not(.completed)");
  if (unfinished) {
    unfinished.scrollIntoView({ behavior: "smooth", block: "center" });
  }
});

function openVideoPopup(videoId) {
  document.getElementById("videoFrame").src =
    `https://www.youtube.com/embed/${videoId}?autoplay=1`;
  showPopup('videoPopup');

  const btn = document.getElementById("openInYoutubeBtn");
  btn.onclick = () => {
    openInYouTubeApp(videoId);
  };
}

function openInYouTubeApp(videoId) {
  // For Android
  const androidIntent = `https://www.youtube.com/watch?v=${videoId}`;
  
  // For iOS
  const iosUrl = `vnd.youtube://watch?v=${videoId}`;
  
  // Try Android intent first
  window.location.href = androidIntent;
  
  // Fallback for iOS and if Android intent fails
  setTimeout(() => {
    if (!document.webkitHidden && !document.hidden) {
      window.location.href = iosUrl;
      
      // Final fallback to web
      setTimeout(() => {
        if (!document.webkitHidden && !document.hidden) {
          window.open(`https://www.youtube.com/watch?v=${videoId}`, "_blank");
        }
      }, 500);
    }
  }, 200);
}

function scrollToNextUnfinished(currentIndex) {
  for (let i = currentIndex + 1; i < videos.length; i++) {
    if (!savedData[i]?.completed && !savedData[i]?.skipped) {
      const nextLesson = document.querySelector(`.lesson[data-index='${i}']`);
      if (nextLesson) {
        nextLesson.scrollIntoView({ behavior: "smooth", block: "center" });
      }
      break;
    }
  }
}

function showPopup(id) {
  const p = document.getElementById(id);
  
  if (id === 'assessmentPopup') {
    // Special handling for assessment popup with slow animation
    p.style.display = 'flex';
    p.style.background = 'transparent'; // Ensure no background
    
    // Small delay to allow display to take effect before starting animation
    setTimeout(() => {
      p.classList.add('show');
    }, 10);
    
    // Scroll assessment popup content to top when shown
    setTimeout(() => {
      const assessmentContent = document.getElementById('assessmentDynamicContent');
      if (assessmentContent) {
        assessmentContent.scrollTop = 0;
      }
    }, 50);
  } else {
    // Regular popup behavior
    p.classList.add('show');
    p.style.display = 'flex';
  }
}

function hidePopup(id) {
  const p = document.getElementById(id);
  if (p) {
    p.classList.remove('show');
    
    if (id === 'assessmentPopup') {
      // Wait for animation to complete before hiding
      setTimeout(() => {
        p.style.display = 'none';
      }, 800); // Match the transition duration (0.8s = 800ms)
    } else {
      // Regular popup behavior
      setTimeout(() => {
        p.style.display = 'none';
        if (id === 'videoPopup') document.getElementById("videoFrame").src = "";
      }, 300);
    }
  }
}

document.getElementById('completeLesson').onclick = () => {
  hidePopup('popup');
  
  // Make sure we have the correct current lesson div
  if (currentLessonDiv) {
    const index = parseInt(currentLessonDiv.dataset.index);
    currentLessonDiv = document.querySelector(`.lesson[data-index="${index}"]`);
    
    // Reset the note popup to normal state before opening
    resetNotePopup();
    openNotePopup(currentLessonDiv);
  }
};

// Replace the current skipLessonBtn onclick handler
document.getElementById('skipLessonBtn').onclick = () => {
  hidePopup('popup');
  
  // Store the current lesson div reference
  const lessonToSkip = currentLessonDiv;

  // Show confirmation popup first
  confirmAction = () => {
    hidePopup('confirmPopup');
    openSkipNotePopup(lessonToSkip); // Use the local variable, not currentLessonDiv
  };

 document.getElementById('confirmText').textContent = "Bu g√∂revi sonra da tamamlayabilirsin ama atlama sebebini yazman gerekiyor. Hazƒ±r mƒ±sƒ±n?";
  document.getElementById('confirmYes').textContent = "Evet";
  document.getElementById('confirmNo').textContent = "ƒ∞ptal";
  showPopup('confirmPopup');
};

// Create a function to open the skip note popup
function openSkipNotePopup(lessonDiv) {
  currentLessonDiv = lessonDiv;
  const index = parseInt(lessonDiv.dataset.index);
  document.getElementById('notePopupHeader').textContent = `${index + 1}. G√∂rev Atlanƒ±yor`;
  document.getElementById('noteInput').value = savedData[index]?.skipNote || '';
  
  // Reset font styles to default or smaller
  noteMessage.style.fontSize = '12px';
  noteMessage.style.fontWeight = 'normal';
  document.getElementById('wordProgress').style.width = '0%';
  document.querySelector('.word-progress').style.display = 'none';
  
  // Set up for skip note (no word count requirement)
  const saveBtn = document.getElementById('saveNote');
  saveBtn.textContent = "Notu Kaydet ve G√∂revi ATLA";
  
  // Remove any existing click handlers by replacing the element
  const newSaveBtn = saveBtn.cloneNode(true);
  saveBtn.parentNode.replaceChild(newSaveBtn, saveBtn);
  
  // Add the skip note handler
  newSaveBtn.addEventListener('click', saveSkipNote);
  
  showPopup('notePopup');
}

// Function to save skip notes (no word count requirement)
function saveSkipNote() {
  const text = noteInput.value.trim();
  const index = parseInt(currentLessonDiv.dataset.index);
  const now = new Date().toLocaleString();
  
  // Save the skip note
  savedData[index] = { 
    ...savedData[index], 
    skipped: true,
    skipNote: text, 
    skipDate: now 
  };
  
  saveData();
  hidePopup('notePopup');
  noteInput.value = '';
  
  // Reset the note popup to its original state
  resetNotePopup();

  
  // Rebuild the lesson and move to next
  buildLesson(index);
  if (index + 1 < videos.length) buildLesson(index + 1);
  scrollToNextUnfinished(index);
  checkAllHandled();
}

// Function to reset the note popup to its original state
function resetNotePopup() {
  const noteMessage = document.getElementById('noteMessage');
  noteMessage.textContent = `${10} kelime daha yaz.`;
  noteMessage.style.color = 'green';
  noteMessage.style.display = 'none';
  
  document.querySelector('.word-progress').style.display = 'block';
  document.getElementById('wordProgress').style.width = '0%';
  
  const saveBtn = document.getElementById('saveNote');
  saveBtn.textContent = "Notu Kaydet";

  // Remove any existing click handlers by replacing the element
  const newSaveBtn = saveBtn.cloneNode(true);
  saveBtn.parentNode.replaceChild(newSaveBtn, saveBtn);
  
  // Add the correct click handler for normal note saving
  newSaveBtn.addEventListener('click', function saveNormalNote() {
    const text = noteInput.value.trim();
    const words = text.split(/\s+/).filter(w => w).length;
    if (words < 10) {
      noteMessage.style.display = 'block';
      noteMessage.style.color = 'green';
      noteMessage.style.fontSize = '1.2em';
      noteMessage.style.fontWeight = 'bold';
      noteMessage.textContent = `${10 - words} kelime daha yaz.`;
      return;
    }
    confirmAction = () => {
      const index = parseInt(currentLessonDiv.dataset.index);
      const now = new Date().toLocaleString();
      savedData[index] = { ...savedData[index], note: text, lastEdited: now };
      saveData();
      hidePopup('notePopup');
      noteInput.value = '';
      wordProgress.style.width = '0%';
      const msg = lessonCompleteMessages[index] || "Harika! Bir dersi daha tamamladƒ±nƒ±z.";
      document.getElementById('encourageMessage').textContent = msg;
      showPopup('encouragePopup');
      document.querySelector('#encouragePopup button').onclick = () => {
        hidePopup('encouragePopup');
        savedData[index].completed = true;
        saveData();
        buildLesson(index);
        updateProgress();
        updateTopMessage(index);
        if (index + 1 < videos.length) buildLesson(index + 1);
        scrollToNextUnfinished(index);
        checkAllHandled();
      };
    };
    document.getElementById('confirmText').textContent = "Notunu kaydedip bir dahaki g√∂reve ge√ßmek istiyor musun?";
    showPopup('confirmPopup');
  });
  
  // Update the reference to the new button
  document.getElementById('saveNote').id = 'saveNote'; // Ensure ID is preserved
}

document.getElementById('popup').addEventListener("click", e => {
  if (e.target.id === "popup") hidePopup('popup');
});

const notePopup = document.getElementById('notePopup');
const noteInput = document.getElementById('noteInput');
const wordCount = document.getElementById('wordCount');
const noteMessage = document.getElementById('noteMessage');
const wordProgress = document.getElementById('wordProgress');

function openNotePopup(lessonDiv) {
  currentLessonDiv = lessonDiv;
  notePopup.style.display = 'flex';
  notePopup.classList.add('show');
  noteInput.value = savedData[lessonDiv.dataset.index]?.note || '';
  const lessonIndex = parseInt(lessonDiv.dataset.index);
  document.getElementById('notePopupHeader').textContent = `${lessonIndex + 1}. G√∂rev: ${titles[lessonIndex]}`;
  updateWordCount();

  noteMessage.style.display = 'none';
}

function updateWordCount() {
  const words = noteInput.value.trim().split(/\s+/).filter(w => w).length;
  noteMessage.style.display = words < 10 ? 'block' : 'none';
  noteMessage.textContent = words < 10 ? `${10 - words} kelime daha yaz.` : '';
  const percent = Math.min((words / 10) * 100, 100);
  document.getElementById('wordProgress').style.width = percent + '%';
}

noteInput.addEventListener('input', updateWordCount);

document.getElementById('cancelNote').onclick = () => {
  hidePopup('notePopup');
  noteInput.value = '';
  noteMessage.style.display = 'none';
  wordProgress.style.width = '0%';

  // Reset the popup to normal note state
  resetNotePopup();
  
  // ADD THESE LINES TO RESET THE STATE:
  confirmAction = null; // Reset the confirmAction
  currentLessonDiv = null; // Reset the current lesson reference
  
  // Also reset the save button back to normal note saving
  const saveBtn = document.getElementById('saveNote');
  saveBtn.textContent = "Notu Kaydet";
  saveBtn.onclick = function() {
    const text = noteInput.value.trim();
    const words = text.split(/\s+/).filter(w => w).length;
    if (words < 10) {
      noteMessage.style.display = 'block';
      noteMessage.style.color = 'green';
      noteMessage.style.fontSize = '1.2em';
      noteMessage.style.fontWeight = 'bold';
      noteMessage.textContent = `${10 - words} kelime daha yaz.`;
      return;
    }
    confirmAction = () => {
      const index = parseInt(currentLessonDiv.dataset.index);
      const now = new Date().toLocaleString();
      savedData[index] = { ...savedData[index], note: text, lastEdited: now };
      saveData();
      hidePopup('notePopup');
      noteInput.value = '';
      wordProgress.style.width = '0%';
      const msg = lessonCompleteMessages[index] || "Harika! Bir dersi daha tamamladƒ±nƒ±z.";
      document.getElementById('encourageMessage').textContent = msg;
      showPopup('encouragePopup');
      document.querySelector('#encouragePopup button').onclick = () => {
        hidePopup('encouragePopup');
        savedData[index].completed = true;
        saveData();
        buildLesson(index);
        updateProgress();
        updateTopMessage(index);
        if (index + 1 < videos.length) buildLesson(index + 1);
        scrollToNextUnfinished(index);
        checkAllHandled();
      };
    };
    document.getElementById('confirmText').textContent = "Notunu kaydedip bir dahaki g√∂reve ge√ßmek istiyor musun?";
    showPopup('confirmPopup');
  };
};

document.getElementById('confirmYes').onclick = () => {
  if (confirmAction) confirmAction();
  hidePopup('confirmPopup');
  confirmAction = null;
};

document.getElementById('confirmNo').onclick = () => {
  hidePopup('confirmPopup');
  confirmAction = null; // reset so old action doesn't carry over
};

document.getElementById("videoPopup").addEventListener("click", e => {
  if (e.target.id === "videoPopup") hidePopup('videoPopup');
});

const menuBtn = document.getElementById('menuBtn');
const menuDropdown = document.getElementById('menuDropdown');
menuBtn.addEventListener('click', (e) => {
  menuDropdown.style.display = menuDropdown.style.display === 'flex' ? 'none' : 'flex';
  menuDropdown.style.flexDirection = 'column';
});
document.addEventListener('click', (e) => {
  if (!menuBtn.contains(e.target)) menuDropdown.style.display = 'none';
});

document.getElementById('resetLessons').onclick = () => {
  resetLessons();
};

// Replace the current copyNotesBtn onclick handler
document.getElementById('copyNotesBtn').onclick = () => {
  copyAllNotes(); // New function that copies both completed and skipped notes
};

// Function to copy both completed and skipped notes
function copyAllNotes() {
  let allNotesText = "=== G√ñREV NOTLARI ===\n\n";
  
  // Collect all lessons (completed or skipped) in consecutive order
  const allLessons = [];
  for (let i = 0; i < videos.length; i++) {
    const data = savedData[i] || {};
    const lessonNumber = i + 1;
    const lessonName = titles[i];
    let lessonText = '';

   // Add separator before each lesson (except the first one)
    if (i > 0) {
      lessonText += "-----------------------------------\n\n";
    }
    
    // Add skipped note if it exists
    if (data.skipped && data.skipNote) {
      const skipNoteText = data.skipNote;
      const skipDate = data.skipDate ? data.skipDate : "--";
      lessonText += `ATLANDI üîÑ - ${lessonNumber}. ${lessonName}\nAtlanma Sebebi: ${skipNoteText}\nAtlanma Tarihi: ${skipDate}`;
    } else if (data.skipped) {
      const skipDate = data.skipDate ? data.skipDate : "--";
      lessonText += `ATLANDI üîÑ - ${lessonNumber}. ${lessonName}\nAtlanma Sebebi: Belirtilmemi≈ü\nAtlanma Tarihi: ${skipDate}`;
    }
    
    // Add completed note if it exists, with a separator if there was a skip note
    if (data.completed && data.note) {
      if (lessonText) lessonText += '\n\n';
      const noteText = data.note;
      const editedDate = data.lastEdited ? data.lastEdited : "--";
      lessonText += `Bƒ∞TTƒ∞ ‚úÖ  - ${lessonNumber}. ${lessonName}\n${noteText}\nSon Deƒüi≈ütirilme: ${editedDate}`;
    }
    
    if (lessonText) {
      allLessons.push(lessonText);
    }
  }
  
  // Combine lessons with double newlines
  allNotesText += allLessons.join("\n\n");
  
  // If no notes or skipped lessons, show message
  if (!allLessons.length) {
    showToast("Kopyalanacak not yok!");
    return;
  }


  
  // Add summary information

let lastCompletedLesson = 0;
for (let i = 0; i < videos.length; i++) {
  if (savedData[i]?.completed) {
    lastCompletedLesson = i + 1; // lesson numbers are 1-based
  }
}
  const totalLessons = videos.length;
  const completedCount = Object.values(savedData).filter(d => d.completed).length;
const remainingCount = totalLessons - lastCompletedLesson;
  const skippedCount = totalLessons - remainingCount - completedCount;

  
  allNotesText += `\n\n=== √ñZET ===
Toplam G√∂rev: ${totalLessons}
Tamamlanan: ${completedCount}

\n`;
  
  // Add current date
  const currentDate = new Date().toLocaleString('tr-TR');
  allNotesText += `Kopyalama Tarihi: ${currentDate}`;
  
  // Copy to clipboard
  const temp = document.createElement('textarea');
  temp.value = allNotesText;
  document.body.appendChild(temp);
  temp.select();
  try { 
    document.execCommand('copy'); 
    showToast("T√ºm notlar ve atlama sebepleri kopyalandƒ±!");
  } catch (e) { 
    console.error(e);
    showToast("Kopyalama hatasƒ±!");
  }
  document.body.removeChild(temp);
}

function showToast(msg) {
  const toast = document.createElement('div');
  toast.textContent = msg;
  Object.assign(toast.style, {
    position: 'fixed',
    top: '50%',
    left: '50%',
    transform: 'translate(-50%, -50%)',
    background: '#28a745',
    color: '#fff',
    padding: '12px 25px',
    borderRadius: '8px',
    boxShadow: '0 2px 10px rgba(0,0,0,0.3)',
    fontWeight: 'bold',
    fontSize: '1em',
    maxWidth: '80%',
    textAlign: 'center',
    zIndex: 9999,
    pointerEvents: 'none',
    lineHeight: '1.2',
  });
  document.body.appendChild(toast);
  toast.style.opacity = '0';
  toast.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
  requestAnimationFrame(() => {
    toast.style.opacity = '1';
    toast.style.transform = 'translate(-50%, -50%) scale(1.05)';
  });
  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transform = 'translate(-50%, -50%) scale(1)';
    setTimeout(() => document.body.removeChild(toast), 300);
  }, 2000);
}

function triggerBounce(id) {
  const step = document.getElementById(id);
  if (!step.classList.contains('bounced')) {
    step.classList.add('bounce', 'bounced');
    setTimeout(() => step.classList.remove('bounce'), 700);
  }
}

function updateProgress() {
  const totalLessons = videos.length;
  const completedLessons = Object.values(savedData).filter(d => d.completed).length;
  const progress = completedLessons / totalLessons;
  if (completedLessons >= 0) triggerBounce('stepBeginner');
  if (progress >= 0.25) triggerBounce('stepBronze');
  if (progress >= 0.5) triggerBounce('stepSilver');
  if (progress >= 0.85) triggerBounce('stepGold');
  document.getElementById('stepBeginner').classList.toggle('completed', completedLessons >= 0);
  document.getElementById('stepBronze').classList.toggle('completed', progress >= 0.25);
  document.getElementById('stepSilver').classList.toggle('completed', progress >= 0.5);
  document.getElementById('stepGold').classList.toggle('completed', progress >= 0.85);
  const progressLine = document.getElementById('progressLine');
  progressLine.style.width = (progress * 100) + "%";
}

function openNoteReadPopup(lessonDiv) {
  currentLessonDiv = lessonDiv;
  const index = parseInt(lessonDiv.dataset.index);
  const noteData = savedData[index] || {};
  const popupContent = document.querySelector("#noteReadPopup .popup-content");
  const oldClose = document.getElementById("noteReadCloseBtn");
  if (oldClose) oldClose.remove();
  const closeBtn = document.createElement('span');
  closeBtn.id = "noteReadCloseBtn";
  closeBtn.textContent = "√ó";
  closeBtn.style.position = "absolute";
  closeBtn.style.top = "6px";
  closeBtn.style.right = "8px";
  closeBtn.style.fontSize = "0.9em";
  closeBtn.style.cursor = "pointer";
  closeBtn.style.color = "#333";
  closeBtn.style.opacity = "0.6";
  closeBtn.title = "Kapat";
  closeBtn.onclick = () => {
    const noteDiv = document.getElementById("noteReadContent");
    const text = noteDiv.textContent.trim();
    if (text) {
      const index = parseInt(currentLessonDiv.dataset.index);
      const now = new Date().toLocaleString();
      savedData[index] = { ...savedData[index], note: text, lastEdited: now };
      saveData();
      buildLesson(index);
    }
    hidePopup('noteReadPopup');
  };
  popupContent.style.position = "relative";
  popupContent.appendChild(closeBtn);
  let noteHeader = document.getElementById('noteReadHeader');
  if (!noteHeader) {
    noteHeader = document.createElement('div');
    noteHeader.id = 'noteReadHeader';
    noteHeader.style.fontSize = '1.3em';
    noteHeader.style.fontWeight = 'bold';
    noteHeader.style.color = '#555';
    noteHeader.style.marginBottom = '6px';
    noteHeader.style.textAlign = "center";
    popupContent.insertBefore(noteHeader, document.getElementById('noteReadContent'));
  }
  noteHeader.innerHTML = `${index + 1}. ${titles[index]} (Notlar)`;
  document.getElementById("noteReadContent").textContent = noteData.note || "(Hen√ºz not yok)";
  const footer = document.getElementById("noteFooter");
  const lastEdited = noteData.lastEdited ? noteData.lastEdited : "--";
  footer.textContent = `Son Deƒüi≈ütirilme: ${lastEdited} `;
  showPopup('noteReadPopup');
}

document.getElementById("noteReadPopup").addEventListener("click", e => {
  if (e.target.id === "noteReadPopup") {
    const noteDiv = document.getElementById("noteReadContent");
    const text = noteDiv.textContent.trim();
    if (text) {
      const index = parseInt(currentLessonDiv.dataset.index);
      const now = new Date().toLocaleString();
      savedData[index] = { ...savedData[index], note: text, lastEdited: now };
      saveData();
      buildLesson(index);
    }
    hidePopup('noteReadPopup');
  }
});

function checkAllHandled() {
  const allHandled = Array.from({length: videos.length}, (_, i) => savedData[i] && (savedData[i].completed || savedData[i].skipped)).every(Boolean);
  if (allHandled) {
    showEvaluationButton(); // Show the "Deƒüerlendirme" button immediately
    if (!savedData.allHandledShown) {
      savedData.allHandledShown = true;
      saveData();
      showAllDonePopup(); // Show the popup after the button
    }
  }
}

function showAllDonePopup() {
  const message = "Yeni g√∂rev kalmadƒ±.<br><i> Atlamƒ±≈ütƒ±m ama tekrar deneyeceƒüim </i>  dediƒüin g√∂rev varsa ve o g√∂revi ba≈üarƒ±rsan <span style='background-color: #5458a6; color: white; padding: 2px 2px; border-radius: 2px; font-weight: bold; font-size:16px;'> ATLANDI üîÑ </span> <br> tu≈üuna basƒ±p nasƒ±l ba≈üardƒ±ƒüƒ±na dair notlarƒ±nƒ± gir. B√∂ylece o g√∂revi <span style='background-color: #268235; color: white; padding: 2px 2px; border-radius: 2px; font-weight: bold; font-size:16px;'> Bƒ∞TTƒ∞  </span> <br> konumuna getirebilirsin. Kursu bitirmek i√ßin ise, <span style='background-color: #d49c02; color: BLACK; padding: 2px 2px; border-radius: 2px; font-size:16px;' font-weight: bold;> üèÜ SONU√á üèÜ</span> butonuna bas, deƒüerlendirme notunu √∂ƒüren.";
  
  document.getElementById('allDoneText').innerHTML = message;
  showPopup('allDonePopup');
}

function showEvaluationButton() {
  // Check if the button already exists first
  if (document.getElementById('evalBtn')) {
    return; // Exit if the button is already there
  }

  const btn = document.createElement('button');
  btn.id = 'evalBtn';
  btn.textContent = ' üèÜ SONU√á üèÜ';
  btn.style.background = '#d49c02';
  btn.style.color = '#fff';
  btn.style.padding = '10px 20px';
  btn.style.border = 'none';
  btn.style.borderRadius = '8px';
  btn.style.cursor = 'pointer';
  btn.style.marginTop = '20px';
  btn.style.alignSelf = 'center';
  btn.style.fontSize = '1.9em';
  btn.style.fontFamily = 'Georgia, serif';
  btn.style.display = 'block';
  btn.style.margin = '20px auto';
  btn.onclick = () => {
  if (savedData.assessmentViewed) {
    populateAssessmentPopup();
    showPopup('assessmentPopup');
  } else {
    document.getElementById('warnText').textContent = "Bu a≈üamadan sonra ATLANAN g√∂revleri yapabilme ≈üansƒ±n kalmayacak. Son deƒüerlendirmeye hazƒ±r mƒ±sƒ±n?";
    showPopup('warnPopup');
  }
};
  app.appendChild(btn);
  // Add celebration effect if this is the first time showing
  if (!savedData.confettiShown) {
    // Small delay to ensure button is rendered
    setTimeout(() => {
      createConfetti(btn);
      
      // Add pulsing animation to the button
      btn.style.animation = 'pulseCelebration 2s ease-in-out';
      
      
      
      savedData.confettiShown = true;
      saveData();
    }, 300);
  }

  // Persist the button state
  savedData.evalButtonShown = true;
  saveData();
}


document.getElementById('allDoneOk').onclick = () => { hidePopup('allDonePopup'); showEvaluationButton(); };

document.getElementById('warnYes').onclick = () => {
  hidePopup('warnPopup');
  populateAssessmentPopup();
  showPopup('assessmentPopup');
  savedData.assessmentViewed = true;
  saveData();
  for (let i = 0; i < videos.length; i++) {
    if (savedData[i]?.skipped) {
      buildLesson(i);
    }
  }
};

document.getElementById('warnNo').onclick = () => {
  hidePopup('warnPopup');
  confirmAction = null; // reset
};

document.getElementById('assessmentClose').onclick = () => { hidePopup('assessmentPopup'); };

document.getElementById('assessmentPopup').addEventListener("click", e => {
  if (e.target.id === "assessmentPopup") hidePopup('assessmentPopup');
});

function scrollToFirstUnfinishedLesson() {
  for (let i = 0; i < videos.length; i++) {
    if (!savedData[i]?.completed && !savedData[i]?.skipped) {
      const lessonDiv = document.querySelector(`.lesson[data-index='${i}']`);
      if (lessonDiv) {
        lessonDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
      break;
    }
  }
}

function updateTopMessage(index) {
  const topLeft = document.getElementById("tinyTopLeft");
  const bottomText = document.querySelector(".bottom-text");
  const remainingTasks = videos.length - Object.values(savedData).filter(d => d.completed || d.skipped).length;
  const completedLessons = Object.values(savedData).filter(d => d.completed).length;
  bottomText.textContent = remainingTasks > 0
    ? lessonMessages[Math.min(completedLessons, lessonMessages.length - 1)]
    : "G√∂rev kalmadƒ±. SONU√á en altta üëá";
  topLeft.textContent = bottomText.textContent;
}


function populateAssessmentPopup() {
  const completed = Object.values(savedData).filter(d => d.completed).length;
  let imgSrc, region, openingMessage, secondMessage;

  if (completed <= 4) {
    imgSrc = '0001_tokez.png';
    region = 'Emekleyen Ki≈üi';
    secondMessage = "Hen√ºz yolun ba≈üƒ±nda iken g√∂revleri bƒ±rakman, geleceƒüinle ilgili kazanmak i√ßin √ßƒ±ktƒ±ƒüƒ±n √∂z g√ºven yolculuƒüunu ertelemen veya tamamen vazge√ßmen anlamƒ±na geliyor. Benim tavsiyem eksiklik duyduƒüun konularƒ±n √ºzerine eƒüilmek i√ßin √ßaba g√∂stermek, belki ≈üimdi deƒüil ama √ºzerinde biraz s√ºre kafa patlatƒ±p, tamamlayamadƒ±ƒüƒ±n eksik g√∂revleri tamamlamak, hatta bu g√∂revlere yeniden ba≈ülamak, sƒ±fƒ±rdan bir sayfa a√ßmak. <br><br> Peki bundan sonra ne mi yapabilirsin? Eƒüer ≈üu anda geldiƒüin seviyede ba≈üka bir g√∂revi daha yapmak istemiyorum, artƒ±k buna vakit ayƒ±ramam, veya yapamƒ±yorum, zorlanƒ±yorum diyorsan o zaman bana bu kurs sƒ±rasƒ±nda aldƒ±ƒüƒ±n notlarƒ± g√∂nder ki bir deƒüerlendirme yapayƒ±m. Bu kurs senin i√ßin bir KENDƒ∞Nƒ∞ A√áIKLAMA VE HATALARI TESPƒ∞T kursu olsun. Eksiklerinin hangi alanda olduƒüunu, hangi alanda sosyal ihtiya√ßlara sahip olduƒüunu, hangi alanlarda g√º√ßl√º olduƒüunu tespit etmi≈ü olduk. Bunlarƒ± bana aktarƒ±rsan √ºzerinde yorumum olur ve sana √∂zel bir deƒüerlendirme yapmƒ±≈ü olurum. B√∂ylece √∂z g√ºven konusunda daha bilin√ßli hareket etmi≈ü olursun. Yapamadƒ±ƒüƒ±n g√∂revler i√ßin kendini cezalandƒ±rma. Dediƒüim gibi, bana yaz ve benden yorum bekle. A≈üaƒüƒ±daki linke tƒ±kla ve bana bu kurstaki ba≈üarƒ±n/ba≈üarƒ±sƒ±zlƒ±ƒüƒ±n konusunda email yaz l√ºtfen. Ayrƒ±ca eƒüer benimle telefonda g√∂r√º≈ümek istersen ve danƒ±≈ümanlƒ±k almak istersen de yine mail yolu ile bana ula≈üman gerekiyor. Bu kursta benimle olduƒüun i√ßin te≈üekk√ºr ederim. Aplikasyonda hatalar tespit ettiysen de yine yazmaktan √ßekinme.";
  } else if (completed <= 9) {
    imgSrc = '0002_kalkmak.png';
    region = 'Kalkmaya Ba≈ülayan Ki≈üi';
    secondMessage = "Yine de tebrik ederim. Kalkmaya √ßalƒ±≈ütƒ±n, mukavemet g√∂sterdin.  Aslƒ±nda biraz daha cesaretini toplasaydƒ±n ve Dayanan Ki≈üi b√∂lgesine ula≈üsaydƒ±n, √ßok iyi olurdu. Belki ileride bunu ger√ßekle≈ütirmek isteyebilirsin. √úzerinde biraz daha kafa patlatƒ±p, tamamlayamadƒ±ƒüƒ±n g√∂revleri tamamlamak, hatta bu g√∂revlere yeniden ba≈ülamak, sƒ±fƒ±rdan bir sayfa a√ßmak iyi olurdu. <br><br> Peki bundan sonra ne mi yapabilirsin? Eƒüer ≈üu anda geldiƒüin seviyede ba≈üka bir g√∂revi daha yapmak istemiyorum, artƒ±k buna vakit ayƒ±ramam, veya yapamƒ±yorum, zorlanƒ±yorum diyorsan o zaman bana bu kurs sƒ±rasƒ±nda aldƒ±ƒüƒ±n notlarƒ± g√∂nder ki bir deƒüerlendirme yapayƒ±m. A≈üaƒüƒ±daki linke tƒ±kla ve bana bu kurstaki ba≈üarƒ±n/ba≈üarƒ±sƒ±zlƒ±ƒüƒ±n konusunda email yaz l√ºtfen. Bu kurs senin i√ßin bir KENDƒ∞Nƒ∞ A√áIKLAMA VE HATALARI TESPƒ∞T kursu olsun. Eksiklerinin hangi alanda olduƒüunu, hangi alanda sosyal ihtiya√ßlara sahip olduƒüunu, hangi alanlarda g√º√ßl√º olduƒüunu tespit etmi≈ü olduk. Bunlarƒ± bana aktarƒ±rsan √ºzerinde yorumum olur ve sana √∂zel bir deƒüerlendirme yapmƒ±≈ü olurum. B√∂ylece √∂z g√ºven konusunda daha bilin√ßli hareket etmi≈ü olursun. Yapamadƒ±ƒüƒ±n g√∂revler i√ßin kendini cezalandƒ±rma. Dediƒüim gibi, bana yaz ve benden yorum bekle. A≈üaƒüƒ±daki linke tƒ±kla ve bana bu kurstaki ba≈üarƒ±n/ba≈üarƒ±sƒ±zlƒ±ƒüƒ±n konusunda email yaz l√ºtfen. Ayrƒ±ca eƒüer benimle telefonda g√∂r√º≈ümek istersen ve danƒ±≈ümanlƒ±k almak istersen de yine email yolu ile bana ula≈üman gerekiyor. Bu kursta benimle olduƒüun i√ßin te≈üekk√ºr ederim. Aplikasyonda hatalar tespit ettiysen bunu belirtirsen sevineceƒüim. G√∂r√º≈ü√ºr√ºz...";
  } else if (completed <= 16) {
    imgSrc = '0003_dayanan.png';
    region = 'Dayanan Ki≈üi';
    secondMessage = "Yine de seni tebrik ederim. ƒ∞yi dayandƒ±n. Seninle bu g√∂revlerde beraber olmak g√ºzeldi. Umarƒ±m senin i√ßin de yararlƒ± ge√ßmi≈ütir. Dayanan, kendini zorlayan bir yapƒ±n var. ≈ûu anda usta konuma ula≈üamamƒ±≈ü olsan da √ßok iyi ba≈üarƒ±lar elde ettin. Benim tavsiyem eksiklik duyduƒüun konularƒ±n √ºzerine eƒüilmek i√ßin √ßaba g√∂stermek, belki ≈üimdi deƒüil ama √ºzerinde biraz daha kafa patlatƒ±p, tamamlayamadƒ±ƒüƒ±n g√∂revleri tamamlamak, hatta g√∂revlerin hepsine yeniden ba≈ülamak ve yeni bir deƒüerlendirme elde etmek ve en azƒ±ndan Usta Ki≈üi kategorisini zorlamak. <br><br> Peki bundan sonra ne mi yapabilirsin? Eƒüer ≈üu anda geldiƒüin seviyede ba≈üka bir g√∂revi daha yapmak istemiyorum, artƒ±k buna vakit ayƒ±ramam, veya yapamƒ±yorum, zorlanƒ±yorum diyorsan o zaman bana bu kurs sƒ±rasƒ±nda aldƒ±ƒüƒ±n notlarƒ± g√∂nder ki bir deƒüerlendirme yapayƒ±m. Bu kurs senin i√ßin bir KENDƒ∞Nƒ∞ A√áIKLAMA VE HATALARI TESPƒ∞T kursu olsun. Eksiklerinin hangi alanda olduƒüunu, hangi alanda sosyal ihtiya√ßlara sahip olduƒüunu, hangi alanlarda g√º√ßl√º olduƒüunu tespit etmi≈ü olduk. Bunlarƒ± bana aktarƒ±rsan √ºzerinde yorumum olur ve sana √∂zel bir deƒüerlendirme yapmƒ±≈ü olurum. B√∂ylece √∂z g√ºven konusunda daha bilin√ßli hareket etmi≈ü olursun. Yapamadƒ±ƒüƒ±n g√∂revler i√ßin kendini cezalandƒ±rma. Dediƒüim gibi, bana yaz ve benden yorum bekle. A≈üaƒüƒ±daki linke tƒ±kla ve bana bu kurstaki ba≈üarƒ±n/ba≈üarƒ±sƒ±zlƒ±ƒüƒ±n konusunda email yaz l√ºtfen. Ayrƒ±ca eƒüer benimle telefonda g√∂r√º≈ümek istersen ve danƒ±≈ümanlƒ±k almak istersen de yine mail yolu ile bana ula≈üman gerekiyor. Bu kursta benimle olduƒüun i√ßin te≈üekk√ºr ederim. Aplikasyonda hatalar tespit ettiysen de yine yazmaktan √ßekinme..";
  } else {
    imgSrc = '0004_usta.png';
    region = 'Usta Ki≈üi';
    secondMessage = "Bazƒ± eksiklerin olsa da seni yaptƒ±ƒüƒ±n √∂zverili √ßalƒ±≈ümadan √∂t√ºr√º derinden kutlarƒ±m. Bu g√∂revler sayesinde hayatƒ±nda bir ≈üeylerin deƒüi≈ütiƒüine eminim ve bunlarƒ± MUTLAKA senden duymak isterim. <br><br> Peki bundan sonra ne mi yapabilirsin? Peki bundan sonra ne mi yapabilirsin? Eƒüer ≈üu anda geldiƒüin seviyede ba≈üka bir g√∂revi daha yapmak istemiyorum, artƒ±k buna vakit ayƒ±ramam, veya yapamƒ±yorum, zorlanƒ±yorum diyorsan o zaman bana bu kurs sƒ±rasƒ±nda aldƒ±ƒüƒ±n notlarƒ± g√∂nder ki bir deƒüerlendirme yapayƒ±m. Bu kurs senin i√ßin bir KENDƒ∞Nƒ∞ A√áIKLAMA VE HATALARI TESPƒ∞T kursu olsun. Eksiklerinin hangi alanda olduƒüunu, hangi alanda sosyal ihtiya√ßlara sahip olduƒüunu, hangi alanlarda g√º√ßl√º olduƒüunu tespit etmi≈ü olduk. Bunlarƒ± bana aktarƒ±rsan √ºzerinde yorumum olur ve sana √∂zel bir deƒüerlendirme yapmƒ±≈ü olurum. B√∂ylece √∂z g√ºven konusunda daha bilin√ßli hareket etmi≈ü olursun. Yapamadƒ±ƒüƒ±n g√∂revler i√ßin kendini cezalandƒ±rma. Dediƒüim gibi, bana yaz ve benden yorum bekle. A≈üaƒüƒ±daki linke tƒ±kla ve bana bu kurstaki ba≈üarƒ±n/ba≈üarƒ±sƒ±zlƒ±ƒüƒ±n konusunda email yaz l√ºtfen. Ayrƒ±ca eƒüer benimle telefonda g√∂r√º≈ümek istersen ve danƒ±≈ümanlƒ±k almak istersen de yine email yolu ile bana ula≈üman gerekiyor. Bu kursta benimle olduƒüun i√ßin te≈üekk√ºr ederim. Aplikasyonda hatalar tespit ettiysen de yine yazmaktan √ßekinme.";
  }

  if (completed === videos.length) {
    secondMessage = "Bu ba≈üarƒ±ndan √∂t√ºr√º seni tebrik etmek isterim. Zorlu saatlerdi deƒüil mi? Ama buna deƒüdi. Ba≈üarƒ±n hakkƒ±nda diƒüer insanlara da yol g√∂stermesi a√ßƒ±sƒ±ndan ufak bir tanƒ±klƒ±ƒüƒ±nƒ± m√ºsaade edersen internet sitemde kullanmak isterim. L√ºtfen bana yazar mƒ±sƒ±n? <br><br> Peki bundan sonra ne mi yapabilirsin? A≈üaƒüƒ±daki linke tƒ±kla ve bana ba≈üarƒ±n konusunda email yaz l√ºtfen. Bu kurs senin i√ßin bir KENDƒ∞Nƒ∞ A√áIKLAMA VE HATALARI TESPƒ∞T kursu olsun. Eksiklerinin hangi alanda olduƒüunu, hangi alanda sosyal ihtiya√ßlara sahip olduƒüunu, hangi alanlarda g√º√ßl√º olduƒüunu tespit etmi≈ü olduk. Bunlarƒ± bana aktarƒ±rsan √ºzerinde yorumum olur ve sana √∂zel bir deƒüerlendirme yapmƒ±≈ü olurum. B√∂ylece √∂z g√ºven konusunda daha bilin√ßli hareket etmi≈ü olursun. Yapamadƒ±ƒüƒ±n g√∂revler i√ßin kendini cezalandƒ±rma. Dediƒüim gibi, bana yaz ve benden yorum bekle. A≈üaƒüƒ±daki linke tƒ±kla ve bana bu kurstaki ba≈üarƒ±n/ba≈üarƒ±sƒ±zlƒ±ƒüƒ±n konusunda email yaz l√ºtfen. Ayrƒ±ca eƒüer benimle telefonda g√∂r√º≈ümek istersen ve danƒ±≈ümanlƒ±k almak istersen de yine email yolu ile bana ula≈üman gerekiyor. Bu kursta benimle olduƒüun i√ßin te≈üekk√ºr ederim. Aplikasyonda hatalar tespit ettiysen de yine yazmaktan √ßekinme.";
  }

  openingMessage = `Toplam <strong>${completed}</strong> ders tamamlayarak <strong style="font-size: 1.8em; color: #5458a6; display: block; text-align: center; margin: 15px 0; padding: 10px; background: #f0f4ff; border-radius: 8px; border-left: 5px solid #5458a6;">${region}</strong> b√∂lgesine eri≈ütin. Kursa katƒ±ldƒ±ƒüƒ±n ve kendini geli≈ütirmek istediƒüin i√ßin te≈üekk√ºr ederim. Umarƒ±m sana bir yararƒ± olmu≈ütur bu √ßalƒ±≈ümanƒ±n. Bu arada eksik olduƒüun noktalarda sana s√∂yleyecek birka√ß s√∂z√ºm de var.`;

  // Find skipped lessons
   const skippedLessons = [];
  for (let i = 0; i < videos.length; i++) {
    if (savedData[i]?.skipped && !savedData[i]?.completed) {
      skippedLessons.push(i + 1); // Store lesson numbers (1-20)
    }
  }

  // Add skipped lesson assessment if any are CURRENTLY skipped
  let skippedAssessment = "";
  if (skippedLessons.length > 0) {
    // Find the lowest-numbered (least difficult) CURRENTLY skipped lesson
    const easiestSkipped = Math.min(...skippedLessons);
    
    // Get the assessment for this lesson
    const skippedAssessments = {
      1: "Hayalini hemen birine anlatmanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, kalbinin en derin k√∂≈üesinde sakladƒ±ƒüƒ±n hayalini birine a√ßmak, o hayali y√ºksek sesle dile getirerek ger√ßeƒüe bir adƒ±m daha yakla≈ümakla ilgiliydi. Bunu yapsaydƒ±n, hayallerinin ne kadar g√º√ßl√º olduƒüunu fark eder, yalnƒ±z hissetme duygusundan kurtulur ve hedeflerine ula≈ümak i√ßin cesaret toplardƒ±n. Les Brown‚Äôun o harika s√∂z√ºyle: ‚Äú√áoƒüumuz hayallerimizi ya≈üamƒ±yoruz √ß√ºnk√º korkularƒ±mƒ±zƒ± ya≈üƒ±yoruz.‚Äù Evet, hayallerin i√ßinde dƒ±≈üarƒ± √ßƒ±kmayƒ± bekliyor ve eƒüer sen bunlarƒ± kimseye anlatmazsan, o hayallerin olmadƒ±ƒüƒ±nƒ± d√º≈ü√ºnmeye ba≈ülayabilirsin. √ñncelikle sana tavsiyem, hayallerini y√ºksek sesle kendine s√∂yle. Kendinle konu≈ü. Eƒüer yeterince konu≈üursan, ba≈ükasƒ±na anlatacak kadar cesaret toplayabilirsin. √áekinme. Umursama. Tepki vermelerini bekleme. Hayalini s√∂yle ve ge√ß. Belki de bunu s√∂ylediƒüin ki≈üi negatif bir tepki verecek, belki seni anlamayacak. Ama sen kendi kendine ≈üunu demi≈ü olacaksƒ±n: Benim bir hayalim var ve bunu artƒ±k ba≈ükalarƒ±na, hayata, evrene, dƒ±≈üƒ±ma s√∂yleyebiliyorum. B√∂ylece o hayal benden √ßƒ±kmƒ±≈ü oluyor. Dƒ±≈üarƒ±ya √ßƒ±kƒ±yor. Aynen evlenmeyi d√º≈ü√ºnen birinin bunu dƒ±≈üarƒ±daki insanlara s√∂ylemeye ba≈ülamasƒ± gibi. Eƒüer s√∂ylemezsen, herkes bekar kalmak istediƒüini d√º≈ü√ºnebilir. S√∂ylersen emin ol, sana evlenme adayƒ± bakmaya ba≈ülayacaklar, yardƒ±m edeceklerdir. √á√ºnk√º Yaradan ancak isteklerini bilenlere yardƒ±m edebilir. Bunu a√ßƒ±klayanlara i≈üaretini g√∂sterir. Eƒüer bu h√¢l√¢ seni biraz √ºrk√ºt√ºyorsa, i≈üte bir ipucu: En g√ºvendiƒüin bir arkada≈üƒ±nƒ± ya da ailenden birini se√ß, belki bir kahve i√ßerek sakin bir ortamda payla≈ü. √ñnce hayalini birka√ß c√ºmleyle yaz, b√∂ylece ne s√∂yleyeceƒüini bilirsin ve konu≈üma doƒüal akar",
      2: "Korkunu se√ß, konu≈ü ve payla≈ü demi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, i√ßindeki seni geri tutan bir korkuyu bulup bunu bir ba≈ükasƒ±yla payla≈üarak o y√ºk√º hafifletmekle ilgiliydi. Bunu ba≈üardƒ±ƒüƒ±ndaysa, korkularƒ±n seni daha az kontrol eder, yeni bir bakƒ±≈ü a√ßƒ±sƒ±yla rahatlar ve birinin seni anlamasƒ±yla g√º√ßlenirsin. ƒ∞nsanlarƒ±n o banal ve sƒ±kƒ±cƒ± konu≈ümalarƒ±nƒ±n √∂tesine ge√ßerdin. Dikkat ettin mi? Kimse korkularƒ±ndan s√∂z etmiyor. Kimse hastalƒ±klarƒ±ndan s√∂z etmiyor, kimse i√ßsel yaralarƒ±nƒ± d√∂km√ºyor birbirine. G√ºvenmiyoruz. Ba≈ükalarƒ±na korkularƒ±ndan s√∂z etmek G√úVENMEK demektir. Evet, ilk g√ºvenen sen ol. Ben ne zaman bunu yapsam, konu≈ütuƒüum ki≈üinin de aniden a√ßƒ±ldƒ±ƒüƒ±nƒ± ve kendi korkularƒ±nƒ± bana anlattƒ±ƒüƒ±nƒ± g√∂r√ºr√ºm. ƒ∞lgin√ß deƒüil mi? Korkularƒ±ndan korkma. Korku payla≈ütƒ±k√ßa azalƒ±r. Tony Robbins‚Äôin dediƒüi gibi, ‚ÄúKorkmamƒ±z gereken tek ≈üey korkunun kendisi; adsƒ±z, nedensiz, haksƒ±z bir korku ki bu, geri √ßekilmeyi ilerlemeye d√∂n√º≈üt√ºrmek i√ßin gereken √ßabalarƒ± felce uƒüratƒ±r.‚Äù Hala zor mu geliyor? ≈û√∂yle yap: B√ºy√ºk bir korku yerine k√º√ß√ºk bir ≈üey se√ß, mesela ‚Äúyeni bir i≈üe ba≈ülamaktan √ßekiniyorum‚Äù gibi. Bir yakƒ±n arkada≈üƒ±na ya da √ßevrim-i√ßi bir toplulukta anonim olarak payla≈ü, sadece i√ßini d√∂kmek bile b√ºy√ºk bir adƒ±m olacak!",
      3: "Olumlama yaparak sokakta hƒ±zlƒ± adƒ±mlarla meditatif halde y√ºr√ºmeni istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, sokakta kendinden emin adƒ±mlarla y√ºr√ºrken olumlu s√∂zler s√∂yleyerek zihnini g√º√ßlendirmek ve kalbinle ruhunu birle≈ütirmekle ilgiliydi. Yapsaydƒ±n, kendini daha enerjik, zihnini daha berrak ve daha umutlu hissederdin. Louise Hay‚Äôin o g√ºzel s√∂z√ºyle, ‚ÄúD√º≈ü√ºnd√ºƒü√ºm√ºz her d√º≈ü√ºnce geleceƒüimizi yaratƒ±yor.‚Äù Fokus olduƒüun d√º≈ü√ºncelere dikkat et. Genellikle a≈üaƒüƒ± √ßeken, negatif anlamda etki yapan daraltƒ±cƒ± fikirleri kafanda s√ºrekli tekrarladƒ±ƒüƒ±nƒ± g√∂receksin. Peki bunu deƒüi≈ütirmenin yolu nedir? Kendi kendine olumlu ≈üeyler s√∂ylemek. Ama sana daha ilgincini s√∂yleyeyim. √ñncelikle kendinle KONU≈ûMAK √ßok √∂nemli. Daha √∂nce pek √ßok videomda belirttim. Kendinle konu≈ü. Mutlaka yap bunu. Farklƒ± bir insanla konu≈üuyormu≈ü gibi kendine uzaktan bakmayƒ± √∂ƒüren. G√∂receksin kendinle ilgili i√ßg√∂r√ºler kazanacaksƒ±n ve birisi sana sorduƒüu zaman SEN Kƒ∞MSƒ∞N diye, verecek bir cevabƒ±n olacak. Kendini tanƒ±malƒ±sƒ±n, yoksa hayatta ba≈üarƒ±ya ula≈üamayacaksƒ±n. Ne istediƒüini, hangi fikirlere sahip olduƒüunu bil. Kendini ba≈ütan yarat. Eskimi≈ü fikirlerini deƒüi≈ütir. Kendine el at. Bir aƒüabey bir abla gibi. Bak yanlƒ±≈ü d√º≈ü√ºn√ºyorsun, de kendine. Eƒüer bu sana h√¢l√¢ zor geliyorsa, i≈üte bir t√ºyo: Sessiz bir park ya da sakin bir sokak se√ß, cebine ‚ÄúBen g√º√ßl√ºy√ºm‚Äù gibi basit bir olumlama yaz ve y√ºr√ºrken sessizce tekrarla. ƒ∞lk g√ºn sadece 5 dakika dene, farkƒ± hissedeceksin.",
      4: "B√∂lgendeki kurslardan se√ßtiƒüin bir tanesine yazƒ±lmamƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, yerel belediye kurslarƒ±ndan birini se√ßip katƒ±larak, yeni beceriler ke≈üfetmek ve toplulukla baƒü kurmakla ilgiliydi. √ñd√ºlleri arasƒ±nda gizli yetenekleri ke≈üfetmek, benzer d√º≈ü√ºnen insanlarla destek aƒüƒ± kurmak ve yeni fƒ±rsatlar a√ßabilecek pratik bilgiler edinmek yer alƒ±yordu. Jim Rohn‚Äôun bilgece s√∂ylediƒüi gibi, ‚ÄúResmi eƒüitim size ge√ßim saƒülar; kendi kendine eƒüitim size servet kazandƒ±rƒ±r.‚Äù Bu g√∂revi sana verme amacƒ±m gidip kursta m√ºthi≈ü bir gitarist veya kameraman olmayƒ± √∂ƒürenmekten ziyade, odandan dƒ±≈üarƒ± √ßƒ±kmaya seni zorlamaktƒ±. Bazƒ± insanlar dƒ±≈üarƒ± √ßƒ±kƒ±p da ne yapayƒ±m, enteresan bir ≈üey mi var sanki, derler. Hayƒ±r, yaratmasƒ±nƒ± ve bulmasƒ±nƒ± bilene √ßok ilgin√ß ≈üeyler var dƒ±≈üarƒ±da. Ben de hayatta √∂ƒürendiƒüim hemen hemen her ≈üeyi kurslardan √∂ƒürendim. ƒ∞nan bana hayat d√∂n√º≈üt√ºr√ºc√º olmasa bile, √ßok deƒüerli bilgilere ula≈ümanƒ± saƒülayacak, deƒüi≈üik insanlarla tanƒ±≈üma fƒ±rsatlarƒ± yaratacak kurslara yazƒ±labilirsin. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: √ñnce √ßevrim-i√ßi olarak kurslarƒ± ara≈ütƒ±rƒ±p ger√ßekten seni heyecanlandƒ±ran birini se√ß, √∂rneƒüin bir hobiyle ilgili bir sƒ±nƒ±f, ve ilk derse bir arkada≈üƒ±nƒ±zƒ± davet ederek ba≈ülangƒ±√ßtaki √ßekingenliƒüi azalt.",
      5: "Kendin hakkƒ±nda 10 sayfalƒ±k bir yazƒ± yazmanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, kendini ba≈ükahraman olarak zorluklarƒ± a≈üan bir ki≈üi gibi g√∂sterdiƒüin bir hikaye yazarak, yazƒ±yƒ± √∂z-yansƒ±ma ve ki≈üisel kurtulu≈üu g√∂rselle≈ütirme aracƒ± olarak kullanmakla ilgiliydi. Tamamlasaydƒ±n, kendi ya≈üam m√ºcadelelerine dair terap√∂tik i√ßg√∂r√ºler kazanƒ±r, yaratƒ±cƒ±lƒ±ƒüƒ±nƒ± geli≈ütirir ve engelleri geri d√∂n√º≈ü i√ßin bir basamak olarak g√∂ren diren√ßli bir zihniyet olu≈ütururdun. Bren√© Brown‚Äôun dediƒüi gibi, ‚ÄúHikayemize sahip √ßƒ±kmak ve bu s√ºre√ßte kendimizi sevmek, yapacaƒüƒ±mƒ±z en cesur ≈üeydir.‚Äù Evet kendi hikayemiz √ßok ama √ßok √∂nemli ama biz hep dƒ±≈ütaki insanlarƒ±n hikayelerine odaklanƒ±yoruz. Filmler seyredip romanlar okuyoruz. Neden? √á√ºnk√º diƒüer insanlarƒ±n hayatƒ± √ßok ilgi √ßekici geliyor. Onlar zorluklarƒ± ya≈üamƒ±≈ü, biz ya≈üamayalƒ±m, demek istiyoruz sanƒ±rƒ±m. Oysa kendi hayatƒ±nƒ±n ba≈ü kahramanƒ± olmazsan, herhangi bir konuda ba≈üarƒ±ya ula≈üamazsƒ±n. Bencil ol, egoist narsist ol demiyorum. Ama kim olduƒüunu √∂ƒüren, isteklerini √∂ƒüren, hayat hikayeni √∂ƒüren √ß√ºnk√º SENDEN Bƒ∞R TANE DAHA YOK ve olmayacak. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Yazƒ±yƒ± g√ºnl√ºk par√ßalara b√∂l, her g√ºn bir sayfa yaz ve zaten a≈ütƒ±ƒüƒ±n ger√ßek bir ge√ßmi≈ü m√ºcadele √ºzerinden yazarak hikayeyi otantik ve daha az korkutucu hale getir.",
      6: "Sokakta bir ki≈üiyi durdurup konu≈ümanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, bir yabancƒ±yla basit bir soru sorarak spontane baƒülantƒ±lar kurma sanatƒ±nƒ± uygulamakla ilgiliydi. Faydalarƒ± arasƒ±nda sosyal kaygƒ±nƒ±n azalmasƒ±, ileti≈üim becerilerinin keskinle≈ümesi ve farklƒ± bakƒ±≈ü a√ßƒ±larƒ±ndan beklenmedik i√ßg√∂r√ºlerin sevinci yer alƒ±yordu. ƒ∞nsanlar bize √∂zg√ºrl√ºk getirebilir. Hatta ben buna cidden inanƒ±yorum. √ñzg√ºrl√ºk tek ba≈üƒ±na bir odada oturup ki≈üisel geli≈üim kitaplarƒ± okuyarak gelmiyor. Sokaƒüa √ßƒ±karak geliyor. Mutlaka √ßƒ±kƒ±n ve insanlara deƒüer verin. Onlarƒ±n dinlenilmeye ihtiyacƒ± var, konu≈üulmaya ihtiyacƒ± var. Sana hi√ß oldu mu bilmiyorum ama, bana hep oluyor. Bana birisi yol sorduƒüu zaman hep durup ki≈üinin arkasƒ±ndan acaba istediƒüi lokasyona gitti mi diye bakakalƒ±rƒ±m. Neden? √á√ºnk√º insanlarƒ±n yardƒ±ma ihtiya√ßlarƒ± olduƒüunu bilirim. Onlar yardƒ±mƒ±mƒ±zƒ± bekliyor. Konu≈ümadan yapamazsƒ±n bunu. Mutlaka konu≈ümayƒ± √∂ƒüren. Bunun i√ßin sokaƒüa √ßƒ±kmalƒ±sƒ±n. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: N√∂tr ve zararsƒ±z bir soru se√ß, √∂rneƒüin yakƒ±ndaki bir kafenin yolunu sor, bilsen bile, ve insanlarƒ±n daha rahat olduƒüu bir park gibi d√º≈ü√ºk baskƒ±lƒ± bir ortamda yap.",
      7: "Bir ya≈ülƒ± ile sohbet etmeni istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, tanƒ±dƒ±ƒüƒ±n veya tanƒ±madƒ±ƒüƒ±n bir ya≈ülƒ±ya nezaket g√∂stererek, sohbet, hizmet ve mizah yoluyla nesiller arasƒ± baƒülar kurmak ve pozitiflik yaymakla ilgiliydi. Tamamladƒ±ƒüƒ±ndaysa, empatiyi zenginle≈ütirir, minnettarlƒ±kla dolu kalƒ±cƒ± anƒ±lar yaratƒ±r ve k√º√ß√ºk merhamet eylemlerinin hem veren hem alan √ºzerindeki derin etkisini hatƒ±rlarsƒ±n. Maya Angelou‚Äônun derin s√∂z√ºyle, ‚Äúƒ∞nsanlar ne s√∂ylediƒüinizi unutur, ne yaptƒ±ƒüƒ±nƒ±zƒ± unutur, ama onlarƒ± nasƒ±l hissettirdiƒüinizi asla unutmaz.‚Äù Bir g√ºn sen de ihtiyar olacaksƒ±n, ve yalnƒ±z hissedeceksin. Ya seni de kimse dinlemese? Ya senin de yanƒ±na kimse gelmese nasƒ±l olur? ƒ∞≈üte bunu d√º≈ü√ºn. Sana bu g√∂revi vermemin sebebi ihtiyar insanlarƒ±n en √ßok saygƒ±ya, en √ßok deƒüere, en √ßok dinlenilmeye ihtiyacƒ± olan insanlar olmasƒ±dƒ±r. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Tanƒ±dƒ±k bir ya≈ülƒ±yla, √∂rneƒüin bir akraba veya kom≈üuyla ba≈üla, √∂nceden hafif bir fƒ±kra veya hikaye hazƒ±rla ve market alƒ±≈üveri≈üi gibi basit bir hizmet sunarak konu≈ümayƒ± doƒüal bir ≈üekilde uzat. Onlardan tavsiye almayƒ± da sakƒ±n unutma",
      8: "Be≈ü g√ºn √ºst √ºste sabah y√ºr√ºy√º≈ü√º yapmanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, d√ºzenli erken sabah y√ºr√ºy√º≈üleriyle disiplin olu≈üturmak, sessiz ≈üafak saatlerini yansƒ±ma ve canlƒ±lƒ±k i√ßin kullanmakla ilgiliydi. Avantajlarƒ± arasƒ±nda artan enerji seviyeleri, daha iyi uyku d√ºzenleri ve g√ºn boyunca √ºretkenliƒüi besleyen bir ba≈üarƒ± hissi yer alƒ±yordu. Jocko Willink‚Äôin dediƒüi gibi, ‚ÄúDisiplin √∂zg√ºrl√ºƒüe e≈üittir.‚Äù Bu g√∂revi yapabilseydin, yapabildiƒüini g√∂rseydin, ufak adƒ±mlarla b√ºy√ºmenin ne olduƒüunu ve hayatƒ±n aslƒ±nda bir b√ºy√ºme yeri olduƒüunu anlardƒ±n. Ufak adƒ±mlar. Ufak ba≈üarƒ±lar. G√ºn be g√ºn gerekiyor! Esaretin Bedeli filmindeki Andy Dufresne'nin kazdƒ±ƒüƒ± t√ºnel gibi. Hayattan √ßƒ±kƒ±≈ü minimum deƒüi≈üimlerle gelecek. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Alarmƒ±nƒ± motive edici bir √ßalma listesi veya podcast‚Äôle kur, y√ºr√ºy√º≈ü kƒ±yafetlerini ak≈üamdan hazƒ±rla ve her y√ºr√ºy√º≈ü sonrasƒ± kendini favori bir kahvaltƒ±yla √∂d√ºllendirerek olumlu √ßaƒürƒ±≈üƒ±mlar olu≈ütur.",
      9: "Alƒ±≈üveri≈ü merkezine gidip bir g√∂revli ile uzunca konu≈ümanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, bir perakende √ßalƒ±≈üanƒ±yla samimi bir kariyer konu≈ümasƒ± yaparak, i≈ü uygunluƒüu hakkƒ±nda cesurca tavsiye istemekle ilgiliydi. Faydalarƒ± arasƒ±nda ger√ßek d√ºnya i√ßg√∂r√ºleri kazanmak, aƒü kurma g√ºvenini artƒ±rmak ve kendi kariyer hedeflerinizi netle≈ütirmek yer alƒ±yor. Konu≈ümak iyidir ve √ßok yakƒ±nƒ±mƒ±zda, samimi olmak isteyen, a√ßƒ±lmak isteyen, ciddi g√∂z√ºkseler de g√ºn√ºn sonunda ƒ∞NSAN OLAN, senin benim gibi bir hayatƒ± olan √ßok insan var biz onlarƒ± g√∂rmezden geliyoruz. Hayƒ±r bunu yapma. Artƒ±k maƒüazalara girdiƒüin zaman Hƒ∞KAYELERƒ∞ d√º≈ü√ºn. Acaba ≈üu kasiyerin hayat hikayesi nasƒ±l? Neye ihtiya√ß duyuyor? Bunlarƒ± a√ßƒ±ƒüa √ßƒ±kartmak lazƒ±m. B√∂ylece empati yeteneƒüin geli≈üecek ve kendi kabuƒüunun dƒ±≈üƒ±na √ßƒ±kmƒ±≈ü olacaksƒ±n. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Yoƒüun olmayan saatlerde maƒüazayƒ± ziyaret et, sorularƒ±nƒ± i≈ü ba≈üvurusu yerine ger√ßek bir merak olarak √ßer√ßevele ve konu≈ümayƒ± daha rahat yapmak i√ßin metni √∂nceden sesli prova et.",
      10: "Kalabalƒ±kta aniden durup kahkaha atmanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, sahte bir telefon g√∂r√º≈ümesiyle kendini bilin√ßli hissetmeyi kƒ±rarak, y√ºksek sesle kahkaha atarak halk i√ßinde aptallƒ±ƒüƒ± kucaklamakla ilgiliydi. √ñzg√ºrle≈üme, yargƒ±lanma korkusundan kurtulma, artan kendiliƒüindenlik ve hayata daha ne≈üeli bir yakla≈üƒ±m sunar. Kendini √ßok ciddiye alƒ±yorsun. Bunu kƒ±rman gerekir. Hayat sandƒ±ƒüƒ±n kadar ciddi ve karamsar bir yer deƒüil. Bu g√∂rev bunu bulabilmen i√ßin bir fƒ±rsat saƒülayacaktƒ±. Eƒüer zamanƒ±n varsa mutlaka bu g√∂revi yap. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Alƒ±≈üveri≈ü merkezi yemek alanƒ± gibi kalabalƒ±k ama anonim bir yer se√ß, bir arkada≈üƒ±n komik hikayesine tepki verdiƒüini hayal et ve daha yumu≈üak bir kahkahayla ba≈ülayarak yava≈ü√ßa artƒ±r.",
      11: "Anne ve babanƒ± arayƒ±p te≈üekk√ºr etmeni istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, bir ebeveyne minnettarlƒ±k s√∂zleriyle ula≈üarak, kusurlarƒ± kabul ederken onlarƒ±n hayatƒ±ndaki rol√ºn√º onaylamakla ilgiliydi. Anne babamƒ±z bizlere ne kadar k√∂t√ºl√ºk gibi g√∂z√ºken ≈üeyler yapmƒ±≈ü olursa olsun, eƒüer ≈üu anda nefes alƒ±yorsak, ya≈üƒ±yorsak, yine de onlara bor√ßlu olduƒüumuzu unutmamalƒ±yƒ±z. Bu y√ºzden onlarla barƒ±≈ü i√ßinde olmak, onlarƒ±n bedduasƒ±nƒ± almamak √∂nemlidir. Derin faydalarƒ± arasƒ±nda duygusal iyile≈üme, daha g√º√ßl√º aile baƒülarƒ± ve zihinsel alanƒ± serbest bƒ±rakan bastƒ±rƒ±lmƒ±≈ü kƒ±zgƒ±nlƒ±klarƒ±n salƒ±verilmesi yer alƒ±yordu. Wayne Dyer‚Äôƒ±n √∂ƒürettiƒüi gibi, ‚ÄúBir ≈üeylere bakƒ±≈ü a√ßƒ±nƒ±zƒ± deƒüi≈ütirdiƒüinizde, baktƒ±ƒüƒ±nƒ±z ≈üeyler deƒüi≈üir.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Tam s√∂zleri √∂nceden yaz ve gerekirse oku ve ezberle, sakin bir saatte ara ve duygularƒ± kontrol altƒ±nda tutmak i√ßin olumlu niyete odaklan.",
      12: "K√ºsk√ºn olduƒüun biriyle barƒ±≈ümanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, uzun s√ºredir konu≈ümadƒ±ƒüƒ±mƒ±z biriyle asgari temas kurarak, ardƒ±ndan ortaya √ßƒ±kan duygularƒ± g√∂zlemleyerek √ß√∂z√ºlmemi≈ü sorunlarƒ± i≈ülemeyle ilgiliydi. Bu g√∂rev duygusal olgunluk ve ili≈ükileri onarma potansiyeli getirir. ≈ûunu g√∂receksin, k√ºst√ºƒü√ºn ki≈üinin O KADAR DA umrunda deƒüilsin. Unutmu≈ü gitmi≈ü bile. Hatta sana diyecek ki ‚Äúsorun neydi yahu hatƒ±rlayamadƒ±m.‚Äù Evet, cidden de insanlar unutuyorlar. Ama eƒüer sen unutmadƒ± isen, bu duygusal y√ºk seni a≈üaƒüƒ±lara √ßeker. Bƒ±rak unutan sen ol. Bƒ±rak affeden sen ol, k√º√ß√ºk d√º≈üen, k√º√ß√ºk g√∂r√ºnen sen ol. Hatta sana bir s√∂z vereyim, af dilediƒüin i√ßin asla k√º√ß√ºk d√º≈ümeyeceksin. G√º√ßl√º √ßƒ±kacaksƒ±n. Bren√© Brown‚Äôun vurguladƒ±ƒüƒ± gibi, ‚ÄúKƒ±rƒ±lganlƒ±k yenilik, yaratƒ±cƒ±lƒ±k ve deƒüi≈üimin doƒüduƒüu yerdir.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Ayrƒ±lƒ±ƒüƒ±n √ßok ciddi olmadƒ±ƒüƒ± birini se√ß, mesajƒ± g√∂nder ve hemen duygularƒ±nƒ± bir g√ºnl√ºƒüe yazarak dƒ±≈üa vur, cevapsƒ±z kalmanƒ±n bile ge√ßmi≈üle y√ºzle≈ümede ilerleme olduƒüunu hatƒ±rla.",
      13: "En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, bir yayƒ±neviyle baƒülantƒ± kurarak, anla≈üma pe≈üinde ko≈ümadan rehberlik isteyerek edebi d√ºnyada cesurca aƒü kurmakla ilgiliydi. Faydalarƒ± arasƒ±nda sekt√∂r bilgisi, yaratƒ±cƒ± olarak √∂z g√ºven artƒ±≈üƒ± ve profesyonel yazma hedeflerine y√∂nelik adƒ±mlar yer alƒ±yordu. Ayrƒ±ca √ºst d√ºzey √ßalƒ±≈üan ve sekt√∂rde ve D√úNYADA fikir sahibi bazƒ± insanlarla konu≈ümak, sizleri de onlar gibi √áALI≈ûKAN bir enerjinin i√ßine sokabilir, b√∂ylece etrafƒ±nda seni a≈üaƒüƒ±lara √ßeken, tembel, negatif insanlarƒ±n aƒüƒ±r y√ºk√ºnden kurtulmu≈ü olursun. Arkada≈üƒ±n neyle ilgileniyorsa sen de ona d√∂n√º≈ü√ºrs√ºn. Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Yazƒ± tarzƒ±n hakkƒ±nda kƒ±sa bir tanƒ±tƒ±m konu≈ümasƒ± hazƒ±rla, daha sƒ±cak bir kar≈üƒ±lama i√ßin √∂nce k√º√ß√ºk bir baƒüƒ±msƒ±z yayƒ±nevini ara ki bu yayƒ±nevleri aslƒ±nda sizden kitabƒ±nƒ±zƒ± basmanƒ±z i√ßin para isteyebilir. O y√ºzden kaybedecek bir ≈üeyiniz yok aslƒ±nda.",
      14: "Kom≈üunla tanƒ±≈ümanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, yakƒ±nƒ±mƒ±zdaki biriyle basit bir tanƒ±≈üma yaparak √ßevrenizde bir topluluk hissi olu≈üturmakla ilgiliydi. Daha g√º√ßl√º yerel destek aƒülarƒ±, yalnƒ±zlƒ±k hissinin azalmasƒ± ve g√ºnl√ºk nezaket fƒ±rsatlarƒ± sunar. Ben bu g√∂revi yaptƒ±ƒüƒ±mda yan kom≈üuma annemin yaptƒ±ƒüƒ± a≈üureyi g√∂t√ºr√ºp sunmu≈ütum. A≈üure haftasƒ± olmamasƒ±na raƒümen kimsenin umrunda olmamƒ±≈ütƒ±. √áok yakƒ±nƒ±mƒ±zda insanlar var ve biz onlardan bihaberiz, umursamƒ±yoruz. Oysa sen umursadƒ±ƒüƒ±nƒ±zƒ± g√∂ster. ƒ∞lk umursayan sen ol. G√∂receksin bu √ßok farklƒ± bir enerji getirecek. Dale Carnegie‚Äônin tavsiyesiyle, ‚Äúƒ∞ki ayda, ba≈ükalarƒ±na ilgi g√∂stererek, iki yƒ±lda ba≈ükalarƒ±nƒ± size ilgilendirmekten daha fazla arkada≈ü edinebilirsiniz.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: Ortak bir bina sorunu hakkƒ±nda sƒ±radan bir ba≈ülangƒ±√ß yap, kƒ±sa tut ve k√º√ß√ºk bir jestle, √∂rneƒüin bir tatlƒ± payla≈üarak devam et.",
      15: "Garsona para verip konu≈ümanƒ± istemi≈ütim. En azƒ±ndan bu g√∂revi yapabilirdin. Bu g√∂rev, ki≈üisel bir dokunu≈üla c√∂mertlik uygulamak, bah≈üi≈ü vermeden √∂nce kƒ±sa bir konu≈üma yaparak vermeyi kendinden emin ifadeyle birle≈ütirmekle ilgiliydi. G√∂revin saƒülayacaƒüƒ± √∂d√ºller arasƒ±nda geli≈ümi≈ü empati, pozitiflik ve baskƒ± altƒ±nda ileti≈üim becerilerinin b√ºy√ºmesi yer alƒ±yordu. Veren el olmak m√ºhimdir. Almaktan daha m√ºhimdir. Vermeden alamazsƒ±n. Zig Ziglar‚Äôƒ±n dediƒüi gibi, ‚ÄúBa≈ükalarƒ±nƒ±n istediklerini almalarƒ±na yardƒ±m ederseniz, hayatta istediƒüiniz her ≈üeye sahip olabilirsiniz.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: ‚ÄúBug√ºn ki √ßalƒ±≈ümanƒ±z i√ßin te≈üekk√ºr ederim‚Äù gibi basit, i√ßten bir konu≈üma hazƒ±rla, kalabalƒ±ktan ka√ßƒ±nmak i√ßin sakin bir kafe se√ß ve miktarƒ± √∂nceden hesaplayarak ana odaklan.",
      16: "Sokaktan ge√ßen 10 ki≈üiye merhaba demeni istemi≈ütim. Bu g√∂revi zor g√∂r√ºnse bile yapabilirdin. Bu g√∂rev, yabancƒ±larla tekrarlanan selamla≈ümalarla dostluk yayarak i√ße kapanƒ±klƒ±ƒüƒ± sorgulamak ve a√ßƒ±klƒ±ƒüƒ± te≈üvik etmekle ilgiliydi. Sosyal rahatlƒ±k olu≈üturur, ruhunu y√ºkselten olumlu tepkiler davet eder ve daha sevgi dolu bir d√ºnya g√∂r√º≈ü√º geli≈ütirir. Aslƒ±nda sokaktaki insanlar √ßok yakƒ±nƒ±mƒ±zda. Bunu diyerek ne demek istiyorum? Aslƒ±nda yalnƒ±zlƒ±ƒüƒ± yenmek √ßok yakƒ±nƒ±mƒ±zda. Ama biz onu cep telefonlarƒ±mƒ±zda arƒ±yoruz. Hayƒ±r! insanlar sokakta. ƒ∞nsanlarƒ±n sana vereceƒüi d√∂n√º≈üt√ºr√ºc√º g√º√ß, kendi kendine vereceƒüin ve yƒ±llarca s√ºren i√ßsel arayƒ±≈ülardan daha hƒ±zlƒ± enerji kazanmanƒ±, √∂z g√ºven kazanmanƒ± saƒülar. Mel Robbins‚Äôun te≈üvikiyle, ‚ÄúTamamen farklƒ± bir hayata sadece bir karar uzaktasƒ±nƒ±z.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, sana bir ipucu: G√∂revi insanlarƒ±n gelip ge√ßtiƒüi bir y√ºr√ºy√º≈ü yolu gibi y√ºksek trafikli bir alanda yap, samimi bir g√ºl√ºmseme kullan ve ilerlemeyi takip etmek i√ßin zihinsel olarak say.",
      17: "S√ºpermarkette para≈ü√ºt ara≈ütƒ±rmanƒ± istemi≈ütim. Bu g√∂revi yapabilirdin, evet zor ama imkansƒ±z deƒüildi. Bu g√∂rev, mantƒ±ksƒ±z bir ≈üey sorarak gariplik veya mizahi durumlarda dayanƒ±klƒ±lƒ±k eƒüitimi almakla ilgiliydi. Bu g√∂rev, utan√ß kar≈üƒ±sƒ±nda kalƒ±n bir deri, daha keskin bir zeka ve normlardan baƒüƒ±msƒ±z √∂zg√ºr bir ruh kazandƒ±rƒ±r. Ben bu g√∂revi yaptƒ±ƒüƒ±m zaman hi√ß kimsenin umurunda olmadƒ±ƒüƒ±nƒ±, hatta bunu sorduƒüum insanlarƒ±n bana yardƒ±m etmek istediƒüini g√∂rd√ºm ve ≈üa≈üƒ±rdƒ±m. Ne yani beni d√∂vmeyecekler mi? Kaba konu≈ümayacaklar mƒ±? Evet konu≈ümadƒ±lar. Bu g√∂revi BEN size veriyorum √ß√ºnk√º ben uyguladƒ±m. Hemen bunu yapmalƒ±sƒ±n. Ge√ß kalma. √ñzg√ºrle≈ütirici bir g√∂revdir emin olabilirsin. (Hem biraz komiklik ve √ßƒ±lgƒ±nlƒ±k kime iyi gelmez ki?) Richard Branson‚Äôƒ±n esprili s√∂z√ºyle, ‚ÄúBiri size inanƒ±lmaz bir fƒ±rsat sunarsa ama yapabileceƒüinizden emin deƒüilseniz, evet deyin ‚Äî sonra nasƒ±l yapacaƒüƒ±nƒ±zƒ± √∂ƒürenin!‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, bir ipucu: ‚ÄúPara≈ü√ºt gibi maceracƒ± bir ≈üey arƒ±yorum, bunlarƒ± satƒ±yor musunuz?‚Äù gibi ≈üakacƒ± bir √ßer√ßeve kullan, g√ºl√ºmse ve arkada≈ü canlƒ±sƒ± g√∂r√ºnen bir √ßalƒ±≈üanƒ± se√ß.",
      18: "Be≈ü g√ºn telefonsuz ya≈üamanƒ± istemi≈ütim. Evet zor bir g√∂rev, ama bu g√∂revi yapabilirdin. Bu g√∂rev, dijital detoks yaparak zihnimizin s√ºrekli dikkat daƒüƒ±tƒ±cƒ±lar olmadan √∂zg√ºrce dola≈ümasƒ±na izin vererek yaratƒ±cƒ±lƒ±ƒüƒ± yeniden ke≈üfetmekle ilgiliydi. Daha keskin odaklanma, yenilenmi≈ü hayal g√ºc√º ve teknolojiyle daha saƒülƒ±klƒ± bir denge sunar. Tim Ferriss‚Äôin not ettiƒüi gibi, ‚ÄúMe≈ügul olmak bir tembellik ≈üeklidir.‚Äù ≈ûunu d√º≈ü√ºnebilirsin, daha √∂nceden, mesela 1990'larda cep telefonu yoktu ve insanlar ya≈üamaya devam ediyorlardƒ±. Nasƒ±l oluyordu bu? √á√ºnk√º hayat o telefonlara baƒülƒ± deƒüildir. Bunu zaten biliyorsun, ama bunu v√ºcudunun da hissetmesi gerekiyor. Aynen yeniden y√ºzmeyi √∂ƒürenmek gibi. Hatta aslƒ±nda y√ºzmeyi biliyorsun, tekrar hatƒ±rlat kendine. Ben y√ºzmeyi biliyorum. Korkma. Sen telefonsuz ya≈üamayƒ± biliyorsun. Biliyordun. Atalarƒ±n bunu biliyordu. Eƒüer bu g√∂rev hala zor geliyorsa, bir ipucu: Yakƒ±n √ßevreni √ßevrimdƒ±≈üƒ± olacaƒüƒ±n konusunda √∂nceden bilgilendir, telefon zamanƒ±nƒ± bir not defteri veya kitapla deƒüi≈ütir ve her g√ºn kƒ±sa √ßevrimdƒ±≈üƒ± zamanlarla ba≈ülayarak ilerle.",
      19: "Noel baba ≈üapkasƒ±yla sokakta gezmeni istemi≈ütim. Evet bazƒ±larƒ±na √ßok zor g√∂z√ºkebilir ama senin gibi pek √ßok g√∂revi tamamlamƒ±≈ü bir ki≈üinin bu konuyu ba≈üarmamasƒ± i√ßin bir sebep yoktu. Bu g√∂rev, mevsim dƒ±≈üƒ± ≈üenlikli kƒ±yafetler giyerek yargƒ± ortasƒ±nda eƒülenceyi kutlayarak uyumluluƒüa meydan okumakla ilgiliydi. Sarsƒ±lmaz √∂z g√ºven, bula≈üƒ±cƒ± ne≈üe ve toplumsal beklentilerden kurtulu≈ü kazandƒ±rƒ±r. Bunu yapabilmen i√ßin de √∂zg√ºn olman gerekir, aldƒ±rmaman gerekir. Bu y√ºzden herkese zor gelen ≈üeyleri yapabilmen gerekir. Yoksa herkes gibi sen de konfor alanƒ±nda kalƒ±r, oradan √ßƒ±kmayƒ± kafana koyamazsƒ±n. Cesur olmalƒ±sƒ±n. Dr. Seuss‚Äôun esprili tavsiyesiyle, ‚ÄúNeden uyum saƒülayasƒ±n ki, sen farklƒ± olmak i√ßin doƒüdun.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, bir ipucu: Bakkal alƒ±≈üveri≈üi gibi kƒ±sa bir i≈ü i√ßin giy, soru sorulursa tatil temalƒ± bir ≈üaka yap ve bunun ge√ßici bir eƒülence olduƒüunu s√∂yle. Veya sadece arkada≈ülarla iddiaya girdiƒüinden s√∂z et.",
      20: "Farklƒ± ayakkabƒ±lar ile alƒ±≈üveri≈ü yapmanƒ± istemi≈ütim. Evet, bu en zor g√∂rev, ve bu g√∂rev kasƒ±tlƒ± olarak uyumsuz ayakkabƒ±lar giyerek cesurca normlara meydan okumak, bakƒ±≈ülara kar≈üƒ± √∂zg√ºnl√ºƒü√ºn√º test etmek ve g√º√ßlendirmekle ilgiliydi. ƒ∞√ßsel g√ºc√ºn i√ßsel mizahla alakasƒ± olduƒüunu d√º≈ü√ºnenlerdenim. Farklƒ± ayakkabƒ±lar giyerek aslƒ±nda insanlarƒ±n hi√ß de sizinle ilgilenmediklerini, dƒ±≈ülamadƒ±klarƒ±nƒ±, merak dahi etmediklerini g√∂rebilirdin. Bunu ve buna benzer kendi kendini k√º√ß√ºk d√º≈ü√ºr√ºc√º olan g√∂revleri yaparsan, aslƒ±nda K√ú√á√úK D√ú≈ûME eyleminin sadece kafanda olduƒüunu g√∂r√ºrd√ºn. Kimse seninle ilgilenmiyor veya k√º√ß√ºk d√º≈ü√ºrmeye √ßalƒ±≈ümƒ±yor, bunu yapan SENSƒ∞N. Kendi kendini utandƒ±ran, k√º√ß√ºk g√∂ren sensin, ba≈ükasƒ± deƒüil. Eleanor Roosevelt‚Äôin beyanƒ±yla, ‚ÄúKimse sizi rƒ±zanƒ±z olmadan a≈üaƒüƒ± hissettiremez.‚Äù Eƒüer bu g√∂rev hala zor geliyorsa, belki yapmak istersen diye bir ipucu: Farklƒ± tarzda deƒüil de, belki farklƒ± renklerde ve bu renkler birbiri ile benzer olacak ≈üekilde iki farklƒ± ayakkabƒ± giy, moral desteƒüi i√ßin de g√ºvendiƒüin bir arkada≈üla git ve tepkileri sosyal bir deney olarak g√∂zlemlemeye odaklanarak duygusal olarak konudan hi√ßbir ≈üeyi √ºzerinize alƒ±nma."
    };

    skippedAssessment = `<div style="background: #CAD8E1; padding: 12px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #ffc107;">
      <p style="font-size: 1.2em; margin: 0; color: #506266; line-height: 1.4;">
        <strong>G√∂rev ${easiestSkipped} atlanmƒ±≈ü:</strong> ${skippedAssessments[easiestSkipped]}
      </p>
    </div>`;
  }

  const contentHTML = `
 
<div class="assessment-image-container">
  <img src="${imgSrc}" alt="Milestone Image" style="transform: scale(1);">
</div>

<div class="assessment-content">
  <p style="font-size: 1.2em; margin: 0 0 12px 0; line-height: 1.4; color: #333;">${openingMessage}</p>
  ${skippedAssessment}
  <p style="font-size: 1.2em; margin: 0; line-height: 1.4; color: #555;">${secondMessage}</p>
  
  <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 20px;">
    
    <span style="cursor: pointer; font-size: 1.8em; color: #5458a6; display: block; text-align: center; margin: 15px 0; padding: 10px; background: #ffc107; border-radius: 8px; border-left: 5px solid #5458a6;" onclick="shareResults()">Payla≈ü ‚û¶</span>
  </div>
</div>

<div class="assessment-buttons">
  <button id="assessmentClose" style="background:#28a745; color:#fff; padding:12px 25px; border:none; font-family: Georgia, serif; border-radius:8px;">Kapat</button>
</div>
`;

  document.getElementById('assessmentDynamicContent').innerHTML = contentHTML;
// Add event listener to the close button after it's created
  setTimeout(() => {
    const closeButton = document.getElementById('assessmentClose');
    if (closeButton) {
      closeButton.addEventListener('click', () => {
        hidePopup('assessmentPopup');
      });
    }
  }, 100);
}



function openInYouTubeApp(videoId) {
  // Primary YouTube app URL (works for both Android and iOS)
  const youtubeAppUrl = `https://www.youtube.com/watch?v=${videoId}`;
  // Fallback web URL
  const webUrl = `https://www.youtube.com/watch?v=${videoId}`;

  // Try YouTube app URL first
  window.location.href = youtubeAppUrl;

  // Fallback to web after a short delay if app doesn't open
  setTimeout(() => {
    if (!document.hidden) {
      window.location.href = webUrl;
    }
  }, 500);

  // Show feedback
  showToast('YouTube uygulamasƒ± a√ßƒ±lƒ±yor...');
}


function resetLessons() {
  confirmAction = () => {
    hidePopup('assessmentPopup');
    
    // Store the permanent button state before clearing
    const shouldKeepButton = savedData.evalButtonPermanent;
    
    localStorage.removeItem("lessonData");
    savedData = {};
    savedData.confettiShown = false;
    
    // Restore the permanent button state if it was set
    if (shouldKeepButton) {
      savedData.evalButtonPermanent = true;
    }
    
    app.innerHTML = '';
    
    // Rebuild all lessons
    for (let i = 0; i < videos.length; i++) buildLesson(i);
    
    updateProgress();
    updateTopMessage(0);
    menuDropdown.style.display = 'none';
    
    // If the button should be permanent, show it again
    if (shouldKeepButton) {
      showEvaluationButton();
    }
    
    // Scroll to the first lesson
    const firstLesson = document.querySelector('.lesson[data-index="0"]');
    if (firstLesson) {
      setTimeout(() => {
        firstLesson.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Add highlight animation to the first lesson
        firstLesson.classList.add('new-lesson');
        setTimeout(() => firstLesson.classList.remove('new-lesson'), 1200);
      }, 300);
    }
    
    // Reset assessment viewed flag
    savedData.assessmentViewed = false;
    savedData.evalButtonShown = false;
    savedData.allHandledShown = false;
    saveData();
  };
  document.getElementById('confirmText').textContent = "Aldƒ±ƒüƒ±n T√úM notlar silinecektir. Notlarƒ±nƒ± kopyalamanƒ± √∂neririm. T√ºm dersleri SIFIRLAMAK istediƒüine emin misin?";
  showPopup('confirmPopup');
}
// Initialize lessons and ensure evaluation button persists on load
for (let i = 0; i < videos.length; i++) buildLesson(i);
scrollToFirstUnfinishedLesson();
updateProgress();
updateTopMessage(0);




// Check if all tasks are completed or skipped
const allHandled = videos.length > 0 && 
                   Object.keys(savedData).length >= videos.length && 
                   Array.from({length: videos.length}, (_, i) => savedData[i] && (savedData[i].completed || savedData[i].skipped)).every(Boolean);

if (allHandled) {
  // Show the evaluation button if all tasks are handled
  showEvaluationButton();
  
  // Only show the popup if it hasn't been shown before
  if (!savedData.allHandledShown) {
    savedData.allHandledShown = true;
    saveData();
    showAllDonePopup();
  }
}

// ALSO show the button if the flag was set from a previous session
// This catches the case where the page is refreshed after the button was already shown
if (savedData.evalButtonShown) {
  showEvaluationButton();
}

function shareResults() {
  // Show the share options popup instead of directly sharing
  showPopup('sharePopup');
}

function getShareContent() {
  const completed = Object.values(savedData).filter(d => d.completed).length;
  const total = videos.length;
  let region, emoji;
  
  if (completed <= 4) {
    region = 'Emekleyen Ki≈üi';
    emoji = 'üê£';
  } else if (completed <= 9) {
    region = 'Kalkmaya Ba≈ülayan Ki≈üi';
    emoji = 'üö∂';
  } else if (completed <= 16) {
    region = 'Dayanan Ki≈üi';
    emoji = 'üí™';
  } else {
    region = 'Usta Ki≈üi';
    emoji = 'üèÜ';
  }

 // Create a list of all lessons with completion status
  let lessonsList = "";
  for (let i = 0; i < videos.length; i++) {
    const status = savedData[i]?.completed ? "‚úÖ" : (savedData[i]?.skipped ? "‚è≠Ô∏è" : "‚ùå");
    lessonsList += `${status} ${i+1}. ${titles[i]}\n`;
  }

  const baseText = `${emoji} Git Konu≈ü! uygulamasƒ±nda ${completed}/${total} g√∂revi tamamlayarak "${region}" b√∂lgesine ula≈ütƒ±m! 


--- T√úM G√ñREVLER VE DURUMLARI ---
${lessonsList}
`;

  // Include both skipped and completed notes in order
  const allLessons = [];
  for (let i = 0; i < videos.length; i++) {
    const data = savedData[i] || {};
    const lessonNumber = i + 1;
    const lessonName = titles[i];
    let lessonText = '';

    // Add skipped note if it exists
    if (data.skipped && data.skipNote) {
      const skipNoteText = data.skipNote;
      const skipDate = data.skipDate ? data.skipDate : "--";
      lessonText = `‚è≠Ô∏è ATLANAN - ${lessonNumber}. ${lessonName}\nAtlanma Sebebi: ${skipNoteText}\nAtlanma Tarihi: ${skipDate}`;
    } else if (data.skipped) {
      const skipDate = data.skipDate ? formatDateToReadable(data.skipDate) : "--";
      lessonText = `‚è≠Ô∏è ATLANAN - ${lessonNumber}. ${lessonName}\nAtlanma Sebebi: Belirtilmemi≈ü\nAtlanma Tarihi: ${skipDate}`;
    }

    // Add completed note if it exists
    if (data.completed && data.note) {
      if (lessonText) lessonText += '\n\n';
      const noteText = data.note;
      const editedDate = data.lastEdited ? formatDateToReadable(data.lastEdited) : "--";
      lessonText += `‚úÖ TAMAMLANAN - ${lessonNumber}. ${lessonName}\n${noteText}\nSon Deƒüi≈ütirilme: ${editedDate}`;
    }

    if (lessonText) {
      allLessons.push(lessonText);
    }
  }

  const notes = allLessons.length ? allLessons.join('\n\n') : 'Hen√ºz not yok.';
  const fullText = `${baseText}\n\n--- NOTLARIM ---\n${notes}`;

  return {
    baseText: baseText,
    fullText: fullText,
    subject: `Git Konu≈ü! Ba≈üarƒ±m - ${region}`,
    completed: completed,
    total: total,
    region: region
  };
}


function shareViaEmail(recipient) {
  const content = getShareContent();
  let emailTo = '';
  let emailBody = '';
  
  if (recipient === 'orkun') {
    emailTo = 'orkunkumkale@yahoo.com';
    emailBody = `Merhaba Orkun,\n\n${content.fullText}\n\nSaygƒ±larƒ±mla`;
  } else {
    // For self, we'll use mailto without specifying recipient
    emailBody = content.fullText;
  }
  
  const subject = encodeURIComponent(content.subject);
  const body = encodeURIComponent(emailBody);
  const mailtoUrl = recipient === 'orkun' 
    ? `mailto:${emailTo}?subject=${subject}&body=${body}`
    : `mailto:?subject=${subject}&body=${body}`;
  
  window.location.href = mailtoUrl;
  hidePopup('sharePopup');
  showToast('E-posta istemcisi a√ßƒ±lƒ±yor...');
}

function copyToClipboard() {
  const content = getShareContent();
  const temp = document.createElement('textarea');
  temp.value = content.fullText;
  document.body.appendChild(temp);
  temp.select();
  
  try {
    document.execCommand('copy');
    showToast('Ba≈üarƒ±m ve notlar panoya kopyalandƒ±!');
  } catch (err) {
    showToast('Kopyalama hatasƒ±: ' + err);
  }
  
  document.body.removeChild(temp);
  hidePopup('sharePopup');
}

// NEW: Add Ben Kimim button functionality
document.getElementById('benKimimBtn').addEventListener('click', function() {
  showPopup('benKimimPopup');
});

// Ensure the benKimim popup is properly handled
document.getElementById("benKimimPopup").addEventListener("click", e => {
  if (e.target.id === "benKimimPopup") hidePopup('benKimimPopup');
});

function createConfetti(button) {
  const buttonRect = button.getBoundingClientRect();
  const buttonCenterX = buttonRect.left + buttonRect.width / 2;
  const buttonTop = buttonRect.top;
  const confettiContainer = document.createElement('div');
  confettiContainer.style.position = 'fixed';
  confettiContainer.style.top = '0';
  confettiContainer.style.left = '0';
  confettiContainer.style.width = '100%';
  confettiContainer.style.height = '100%';
  confettiContainer.style.pointerEvents = 'none';
  confettiContainer.style.zIndex = '9998';
  document.body.appendChild(confettiContainer);

  const confettiElements = [];
  const emojis = ['üéâ', '‚≠ê', 'üéà', 'ü•≥', '‚ú®', 'üèÜ'];

  for (let i = 0; i < 40; i++) {
    const confetti = document.createElement('div');
    confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    confetti.style.position = 'absolute';
    confetti.style.fontSize = Math.random() * 20 + 15 + 'px';
    confetti.style.zIndex = '9999';
    confetti.style.willChange = 'transform, opacity';
    
    // Initial position
    confetti.style.left = buttonCenterX + 'px';
    confetti.style.top = buttonTop + 'px';
    
    confettiContainer.appendChild(confetti);
    confettiElements.push(confetti);

    // Animate with requestAnimationFrame for better performance
    const startTime = Date.now();
    const duration = Math.random() * 2000 + 1500;
    const angle = Math.random() * Math.PI * 2;
    const distance = Math.random() * 120 + 80;
    const rotation = Math.random() * 360;

    function animate() {
      const elapsed = Date.now() - startTime;
      const progress = Math.min(elapsed / duration, 1);
      
      if (progress < 1) {
        const x = Math.cos(angle) * distance * progress;
        const y = Math.sin(angle) * distance * progress - 100 * progress * progress;
        const opacity = 1 - progress;
        
        confetti.style.transform = `translate(${x}px, ${y}px) rotate(${rotation * progress}deg)`;
        confetti.style.opacity = opacity;
        
        requestAnimationFrame(animate);
      } else {
        confettiContainer.removeChild(confetti);
        if (confettiContainer.children.length === 0) {
          document.body.removeChild(confettiContainer);
        }
      }
    }
    
    setTimeout(() => requestAnimationFrame(animate), i * 30);
  }
}

function calculateCompletionDays() {
  let firstDate = null;
  let lastDate = null;
  
  // Find the earliest and latest dates from all lessons
  for (let i = 0; i < videos.length; i++) {
    const data = savedData[i] || {};
    
    // Check completed lessons
    if (data.completed && data.lastEdited) {
      const date = new Date(data.lastEdited);
      if (!firstDate || date < firstDate) firstDate = date;
      if (!lastDate || date > lastDate) lastDate = date;
    }
    
    // Check skipped lessons
    if (data.skipped && data.skipDate) {
      const date = new Date(data.skipDate);
      if (!firstDate || date < firstDate) firstDate = date;
      if (!lastDate || date > lastDate) lastDate = date;
    }
  }
  
  // If we have both dates, calculate the difference in days
  if (firstDate && lastDate) {
    const timeDiff = Math.abs(lastDate.getTime() - firstDate.getTime());
    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
    return daysDiff;
  }
  
  return null;
}

function formatDateToReadable(dateString) {
  if (!dateString || dateString === "--") return "--";
  
  try {
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return dateString; // Return original if invalid date
    
    // Use Turkish locale for month names with 24-hour time format
    const datePart = date.toLocaleDateString('tr-TR', {
      day: '2-digit',
      month: 'short',
      year: 'numeric'
    });
    
    const timePart = date.toLocaleTimeString('tr-TR', {
      hour: '2-digit',
      minute: '2-digit',
      hour12: false // 24-hour format
    });
    
    return `${datePart} ${timePart}`;
  } catch (e) {
    return dateString; // Return original if error
  }
}

// Function to show the Ask Orkun popup
function showAskOrkunPopup() {
  // Reset the form
  document.getElementById('userName').value = '';
  document.getElementById('userSurname').value = '';
  document.getElementById('userAge').value = '';
  document.getElementById('askOrkunText').value = '';
  document.getElementById('shareNotesCheckbox').checked = false;
  
  // Reset gender radio buttons
  const genderRadios = document.querySelectorAll('input[name="userGender"]');
  genderRadios.forEach(radio => {
    radio.checked = false;
  });
  
  // Hide the share popup and show the ask popup
  hidePopup('sharePopup');
  showPopup('askOrkunPopup');
}
// Function to send the question to Orkun
function sendQuestionToOrkun() {
  const userName = document.getElementById('userName').value.trim();
  const userSurname = document.getElementById('userSurname').value.trim();
  const userAge = document.getElementById('userAge').value.trim();
 const userCity = document.getElementById('userCity').value.trim(); 
  const questionText = document.getElementById('askOrkunText').value.trim();
  const shareNotes = document.getElementById('shareNotesCheckbox').checked;
  
  // Get selected gender
  let userGender = '';
  const genderRadios = document.querySelectorAll('input[name="userGender"]');
  for (const radio of genderRadios) {
    if (radio.checked) {
      userGender = radio.value;
      break;
    }
  }
  
  // Validate required fields
if (!userName || !userSurname || !userAge || !userGender || !userCity) {
    showToast('L√ºtfen t√ºm ki≈üisel bilgileri doldurun!');
    return;
  }
  
  if (!questionText) {
    showToast('L√ºtfen bir soru yazƒ±n!');
    return;
  }

  // === Add Base Progress Data ===
  const total = videos.length;
  const completed = Object.values(savedData).filter(d => d.completed).length;

  let region = "EMEKLEYEN";
  let emoji = "üê£";
  if (completed >= total * 0.85) { region = "USTA"; emoji = "ü•á"; }
  else if (completed >= total * 0.5) { region = "DAYANAN"; emoji = "ü•à"; }
  else if (completed >= total * 0.25) { region = "KALKMAYA BA≈ûLAYAN"; emoji = "ü•â"; }

const completionDays = calculateCompletionDays();
const daysText = completionDays ? ` (G√∂revleri ${completionDays} g√ºnde tamamladƒ±m.)` : '';

const baseText = `${emoji} Git Konu≈ü! uygulamasƒ±nda ${completed}/${total} g√∂revi tamamlayarak "${region}" b√∂lgesine ula≈ütƒ±m!${daysText}`;

  // === Prepare email content ===
  let emailBody = baseText + "\n\n";   // Insert base data first
  
  
  emailBody += `Soru - Ele≈ütiri - Te≈üekk√ºr:\n\n`;
  emailBody += `${questionText}\n\n`;

 // === ADD ALL TASKS AND THEIR STATUSES ===
  emailBody += "== G√ñREV DURUMLARI ==\n\n";
  
  for (let i = 0; i < videos.length; i++) {
    const data = savedData[i] || {};
    const status = data.completed ? "‚úÖ" : (data.skipped ? "‚ùå" : "‚ùå YAPILMADI");
    emailBody += `${status} ${i + 1}. ${titles[i]} \n`;
    

  }
  
  emailBody += "  \n\n";

  // Add notes if requested
  if (shareNotes) {
    let allNotesText = "== G√ñREV NOTLARI ==\n\n";
    const allLessons = [];
    for (let i = 0; i < videos.length; i++) {
      const data = savedData[i] || {};
      const lessonNumber = i + 1;
      const lessonName = titles[i];
      let lessonText = '';

      if (i > 0) {
        lessonText += "-----------------------------------\n\n";
      }

      if (data.skipped && data.skipNote) {
        const skipNoteText = data.skipNote;
        const skipDate = data.skipDate ? data.skipDate : "--";
        lessonText += `${lessonNumber}. ${lessonName}\nüîÑ ${skipNoteText}\n ${skipDate}`;
      } else if (data.skipped) {
        const skipDate = data.skipDate ? data.skipDate : "--";
        lessonText += `${lessonNumber}. ${lessonName}\nüîÑ Not Yok \n ${skipDate}`;
      }

      if (data.completed && data.note) {
        if (lessonText) lessonText += '\n\n';
        const noteText = data.note;
        const editedDate = data.lastEdited ? data.lastEdited : "--";
        lessonText += `${lessonNumber}. ${lessonName}\n ‚úÖ ${noteText}\n ${editedDate}`;
      }

      if (lessonText) {
        allLessons.push(lessonText);
      }
    }

    allNotesText += allLessons.join("\n\n");
    if (!allLessons.length) {
      allNotesText += "Kopyalanacak not yok!\n\n";
    }

    const totalLessons = videos.length;
    const completedCount = Object.values(savedData).filter(d => d.completed).length;
    allNotesText += `\n\n==KURS √ñZETƒ∞ ==
Toplam G√∂rev: ${totalLessons}
Tamamlanan: ${completedCount}\n`;

    const currentDate = new Date().toLocaleString('tr-TR');
    allNotesText += `Kopyalama: ${currentDate}\n\n`;

    emailBody += allNotesText;
  }
  
  // Create mailto link
  const subject = encodeURIComponent(`Git Konu≈ü! - ${userName} ${userSurname} ${userAge} ${userGender} ${userCity}`);
  const body = encodeURIComponent(emailBody);
  const mailtoUrl = `mailto:orkunkumkale@yahoo.com?subject=${subject}&body=${body}`;

  
  // Open email client
  window.location.href = mailtoUrl;
  
  // Close the popup
  hidePopup('askOrkunPopup');
  
  // Show confirmation message
  showToast('E-posta istemciniz a√ßƒ±lƒ±yor...');
}
// Add event listeners when the document is loaded
document.addEventListener('DOMContentLoaded', function() {
  // Ask Orkun Send button
  document.getElementById('askOrkunSend')?.addEventListener('click', sendQuestionToOrkun);
  
  // Ask Orkun Cancel button
  document.getElementById('askOrkunCancel')?.addEventListener('click', function() {
    hidePopup('askOrkunPopup');
  });
  
  // Close popup when clicking outside
  document.getElementById('askOrkunPopup')?.addEventListener('click', function(e) {
    if (e.target.id === 'askOrkunPopup') {
      hidePopup('askOrkunPopup');
    }
  });
});

 const totalImages = 33;
  let currentIndex = 1;

  // adjust this if running inside Android WebView
  const basePath = "images/"; // e.g. "" if needed

  function updateImage() {
    const img = document.getElementById('galleryImage');
    img.src = `ovgu_(${currentIndex}).jpg`;
    document.getElementById('counter').textContent =
      `${currentIndex} / ${totalImages}`;
  }

  function nextImage() {
    currentIndex = (currentIndex % totalImages) + 1;
    updateImage();
  }

  function prevImage() {
    currentIndex = (currentIndex - 2 + totalImages) % totalImages + 1;
    updateImage();
  }

  // Call this when the popup opens
  function showGallery() {
    currentIndex = 1;
    updateImage();
    document.getElementById('benKimimPopup').style.display = 'block';
  }

  function hidePopup(id) {
    document.getElementById(id).style.display = 'none';
  }

  // OPTIONAL: preload first image when page loads
  document.addEventListener('DOMContentLoaded', updateImage);



</script>
<div class="popup" id="sharePopup">
  <div class="popup-content" style="max-width: 300px;">
    <h3 style="text-align: center; margin-bottom: 20px; color: #5458a6;">Payla≈üƒ±m Se√ßenekleri</h3>
    
    <div style="display: flex; flex-direction: column; gap: 12px;">
      
      

      
<button class="share-option-btn" onclick="showAskOrkunPopup()">
  <span style="font-size: 1.2em; margin-right: 8px;"><img src="kucukorkun.png" alt="sorusormak" style="transform: scale(1);"></span> Orkun'a Sor
</button>
      
      <button class="share-option-btn" onclick="copyToClipboard()">
        <span style="font-size: 1.2em; margin-right: 8px;">üìã</span> Notlarƒ± Panoya Kopyala
      </button>
    </div>
    


    <button onclick="hidePopup('sharePopup')" 
            style="background: #dc3545; color: white; padding: 10px; border: none; border-radius: 6px; amargin-top: 20px; width: 100%;">
      ƒ∞ptal
    </button>
  </div>
</div>

<div id="passwordModal" style="
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.7); display:flex;
  justify-content:center; align-items:center; z-index:9999;">
  <div style="background:#000000; padding:10px 15px; border-radius:5px; text-align:center;">
    <h2>≈ûifre Giri≈üi</h2>
    <input id="passwordInput" type="password" placeholder="≈ûifre" style="padding:8px;width:80%;margin:10px 0;">
    <br>
    <button id="submitPassword" style="padding:8px 16px;">Giri≈ü</button>
    <p id="errorMsg" style="color:red;display:none;margin-top:10px;">Yanlƒ±≈ü ≈üifre!</p>
  </div>
</div>

</body>
</html>
